(function(e){function t(t){for(var r,o,n=t[0],d=t[1],l=t[2],v=0,u=[];v<n.length;v++)o=n[v],i[o]&&u.push(i[o][0]),i[o]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(e[r]=d[r]);c&&c(t);while(u.length)u.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var d=a[n];0!==i[d]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},i={view_coach:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],d=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var c=d;s.push([4,"chunk-vendors"]),a()})({"076e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{attrs:{height:"auto",color:"primary lighten-1"}},[a("v-layout",{attrs:{"justify-center":"",row:"",wrap:""}},[e._l(e.links,function(t){return a("v-btn",{key:t[0],attrs:{color:"white",flat:"",round:"",href:t[1]}},[e._v("\n      "+e._s(t[0])+"\n    ")])}),a("v-flex",{attrs:{primary:"","lighten-2":"","py-3":"","text-xs-center":"","white--text":"",xs12:""}},[e._v("\n      ©2018 — "),a("strong",[e._v("DCMMC")])])],2)],1)},i=[],s={data(){return{links:[["首页","/"],["关于我们","/404/404.html"],["查看学员信息","/view-student.html"],["查看教练信息","/view-coach.html"],["添加学员信息","/add-student.html"],["添加教练信息","/add-coach.html"]]}}},o=s,n=a("2877"),d=a("6544"),l=a.n(d),c=a("8336"),v=a("0e8f"),u=a("553a"),p=a("a722"),m=Object(n["a"])(o,r,i,!1,null,null,null);m.options.__file="footer.vue";t["a"]=m.exports;l()(m,{VBtn:c["a"],VFlex:v["a"],VFooter:u["a"],VLayout:p["a"]})},"35c4":function(e,t,a){},4:function(e,t,a){e.exports=a("df41")},"402c":function(e,t,a){"use strict";var r=a("2b0e"),i=a("bb71");a("da64");r["default"].use(i["a"],{iconfont:"md"})},"71c2":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-toolbar",{attrs:{app:"",color:"teal"}},[a("v-toolbar-title",{staticClass:"title"},[a("span",[e._v("Demo")]),a("span",[e._v(" 数据库管理")])]),a("v-spacer"),a("v-btn",{attrs:{flat:"",href:"/logout_handler"}},[a("span",{staticClass:"title"},[e._v("退出登录")])])],1)},i=[],s={data(){return{}}},o=s,n=a("2877"),d=a("6544"),l=a.n(d),c=a("8336"),v=a("9910"),u=a("71d9"),p=a("2a7f"),m=Object(n["a"])(o,r,i,!1,null,null,null);m.options.__file="header.vue";t["a"]=m.exports;l()(m,{VBtn:c["a"],VSpacer:v["a"],VToolbar:u["a"],VToolbarTitle:p["a"]})},df41:function(e,t,a){"use strict";a.r(t);var r=a("2b0e"),i=(a("402c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("BooomHeader"),a("v-dialog",{attrs:{persistent:"","max-width":"200",transition:"dialog-transition"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[a("v-card",[a("v-container",{attrs:{"justify-center":""}},[a("v-card-title",{staticClass:"headline"},[e._v("正在加载")]),a("v-card-text",[a("v-progress-circular",{attrs:{indeterminate:"",color:"purple"}})],1)],1)],1)],1),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.query_res,callback:function(t){e.query_res=t},expression:"query_res"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",[a("v-dialog",{attrs:{persistent:"","max-width":"300",transition:"dialog-transition"},model:{value:e.edit_dialog,callback:function(t){e.edit_dialog=t},expression:"edit_dialog"}},[a("v-card",[a("v-container",{attrs:{"justify-center":""}},[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.edit_title))]),a("v-card-text",[e._v("\n                  "+e._s(e.edit_msg)+"\n              ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(t){e.edit(!1)}}},[e._v("取消")]),a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(t){e.edit(!0)}}},[e._v("确认")])],1)],1)],1)],1),a("v-img",{staticClass:"grey",attrs:{src:e.headphoto,"max-height":"500px",contain:""}},[a("v-layout",{attrs:{column:"","fill-height":""}},[a("v-card-title",[a("v-btn",{attrs:{dark:"",round:"",large:"",color:"primary"},nativeOn:{click:function(t){e.query_res=!1}}},[a("v-icon",{attrs:{clss:""}},[e._v("chevron_left")]),e._v("\n                    返回\n                  ")],1),a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{dark:"",color:"pink",large:""},nativeOn:{click:function(t){e.confirm()}}},[a("v-icon",{},[e._v("edit")]),e._v("\n                    提交修改\n                  ")],1)],1)],1)],1),a("v-layout",{staticStyle:{"background-color":"white"},attrs:{row:""}},[a("v-flex",{attrs:{xs10:"","offset-xs1":""}},[a("v-card",[a("v-divider",{attrs:{inset:""}}),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[e._v("头像")]),a("file-pond",{ref:"pond",staticStyle:{padding:"0px 24px"},attrs:{name:"headphoto","label-idle":"点击选择文件或者把头像文件拖到这里","allow-multiple":"false","accepted-file-types":"image/jpeg, image/png",allowImageResize:"true",imageResizeUpscale:"false",imageResizeTargetWidth:"600","max-files":"1"}})],1),a("v-divider",{attrs:{inset:""}}),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[e._v("姓名")])],1),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:10",expression:"'required|max:10'"}],staticStyle:{padding:"0px 24px"},attrs:{"error-messages":e.errors.collect("name"),"data-vv-name":"name",label:"姓名",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-divider",{attrs:{inset:""}}),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[e._v("NFC 卡号")])],1),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{padding:"0px 24px"},attrs:{"error-messages":e.errors.collect("card"),"data-vv-name":"card",label:"NFC卡号",required:""},model:{value:e.cardId,callback:function(t){e.cardId=t},expression:"cardId"}}),a("v-divider",{attrs:{inset:""}}),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[e._v("手机号")])],1),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|digits:11",expression:"'required|digits:11'"}],staticStyle:{padding:"0px 24px"},attrs:{"error-messages":e.errors.collect("mobile"),"data-vv-name":"mobile",label:"手机号",required:""},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),a("v-divider",{attrs:{inset:""}}),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[e._v("密码")])],1),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^[0-9a-zA-Z]{6,16}$/},expression:"{required: true, regex: /^[0-9a-zA-Z]{6,16}$/}"}],staticStyle:{padding:"0px 24px"},attrs:{"error-messages":e.errors.collect("password"),label:"密码","data-vv-name":"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,confirmed:e.password,regex:/^[0-9a-zA-Z]{6,16}$/},expression:"{required: true, confirmed:password, regex: /^[0-9a-zA-Z]{6,16}$/}"}],staticStyle:{padding:"0px 24px"},attrs:{"error-messages":e.errors.collect("password_confirmation"),"data-vv-as":"password","data-vv-name":"password_confirmation",label:"确认密码",required:""},model:{value:e.password_confirm,callback:function(t){e.password_confirm=t},expression:"password_confirm"}}),a("v-divider",{attrs:{inset:""}}),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[e._v("性别")])],1),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticStyle:{padding:"0px 24px"},attrs:{items:["男","女"],"error-messages":e.errors.collect("select_sex"),label:"性别","data-vv-name":"select_sex",required:""},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}})],1)],1)],1),a("b"),a("BooomFooter")],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"600"},model:{value:e.err_dialog,callback:function(t){e.err_dialog=t},expression:"err_dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("错误")]),a("v-card-text",[e._v(e._s(e.msg))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.err_dialog=!1}}},[e._v("了解")])],1)],1)],1),0==e.query_res?a("v-content",[a("v-container",{attrs:{"justify-center":""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",[a("div",{staticClass:"headline"},[e._v("查看教练信息")]),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:["NFC卡号","手机号"],"error-messages":e.errors.collect("select"),label:"查询方式","data-vv-name":"select",required:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:0",expression:"'required|decimal:0'"}],attrs:{"error-messages":e.errors.collect("number"),"data-vv-name":"number",label:"NFC 卡号/手机号",required:""},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}),a("v-btn",{on:{click:e.submit}},[e._v("确认")])],1)],1)],1)],1):e._e(),a("BooomFooter")],1)}),s=[],o=a("bc3a"),n=a.n(o),d=a("7bb1"),l=a("076e"),c=a("71c2"),v=a("1501"),u=a.n(v),p=(a("4ed3"),a("57c8"),a("1942")),m=a.n(p),h=a("2cfc"),f=a.n(h),g=a("3505"),b=a.n(g);const _=u()(m.a,f.a,b.a);r["default"].use(d["a"]);var x={name:"ViewCoach",$_veeValidate:{validator:"new"},components:{BooomFooter:l["a"],FilePond:_,BooomHeader:c["a"]},data:()=>({type:"",number:"",name:"",mobile:"",origin_mobile:"",cardId:"",origin_cardId:"",sex:"",password:"",password_confirm:"",query_res:!1,msg:"",err_dialog:!1,loading:!1,edit_dialog:!1,edit_msg:"",edit_title:"",headphoto:"",dictionary:{attributes:{},custom:{select:{required:()=>"请选择查询方式"},number:{required:()=>"请输入手机号/ NFC 卡号",digits:()=>"请输入 11 位手机号"},name:{required:()=>"名字不能为空",max:"名字不能多于 10 个字符"},mobile:{required:()=>"请输入手机号"},select_sex:{required:()=>"请选择性别"},card:{required:()=>"请输出NFC卡号"},password:{required:()=>"请输入密码",regex:()=>"请输入 6~16 位数字和大/小写英文字母组成的密码"},password_confirmation:{required:()=>"不能为空",confirmed:()=>"请重复输入密码",regex:()=>"请输入 6~16 位数字和大/小写英文字母组成的密码"}}}}),mounted(){this.$validator.localize("zh_cn",this.dictionary)},methods:{submit(){Promise.all([this.$validator.validate("select"),this.$validator.validate("number")]).then(e=>{var t=!0;if(e.forEach(function(e){0==e&&(t=!1)}),t){this.loading=!0;var a={target:"coach"};"NFC卡号"==this.type?(a.type="cardId",a.cardId=this.number):"手机号"==this.type&&(a.type="mobile",a.mobile=this.number),n.a.post("/query",a).then(e=>{e.data.code>0?(this.loading=!1,this.msg=e.data.msg,console.log("err"+e.data.msg),this.err_dialog=!0):(this.loading=!1,this.name=e.data.data.name,this.mobile=e.data.data.mobile,this.origin_mobile=this.mobile,this.cardId=e.data.data.cardId,this.origin_cardId=this.cardId,this.headphoto=e.data.data.headphoto,this.password=e.data.data.password,this.password_confirm=e.data.data.password,1==e.data.data.sex?this.sex="男":this.sex="女",this.query_res=!0)}).catch(e=>{this.loading=!1,this.msg=e,console.log("error: "+e),this.err_dialog=!0})}})},confirm(){confirm&&(this.edit_dialog=!1,Promise.all([this.$validator.validate("name"),this.$validator.validate("mobile"),this.$validator.validate("card"),this.$validator.validate("select_sex"),this.$validator.validate("password"),this.$validator.validate("password_confirmation")]).then(e=>{var t=!0;e.forEach(function(e){0==e&&(t=!1)}),t&&(this.edit_title="确认",this.edit_msg="是否确认更新教练信息?",this.edit_dialog=!0)}))},edit(e){if("成功"!=this.edit_title&&"失败"!=this.edit_title)if(e){this.edit_dialog=!1,"男"===this.sex?this.sex=!0:"女"===this.sex&&(this.sex=!1);const e=new FormData;if(this.$refs.pond.getFiles().length>0){const t=this.$refs.pond.getFile();e.append("headphoto",t.file,this.mobile+"."+t.fileExtension)}else console.log("no headphoto");e.append("target","coach"),e.append("name",this.name),e.append("sex",this.sex),e.append("cardId",this.cardId),e.append("mobile",this.mobile),e.append("update",!0),e.append("password",this.password),e.append("origin_cardId",this.origin_cardId),e.append("origin_mobile",this.origin_mobile),n.a.post("/addData",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{this.edit_msg=e.data["msg"],parseInt(e.data["code"])>0?this.edit_title="失败":this.edit_title="成功",this.edit_dialog=!0,this.query_res=!1}).catch(e=>{console.log("errors: "+e),this.edit_msg=e.data,this.edit_title="错误",this.edit_dialog=!0})}else this.edit_dialog=!1;else this.edit_dialog=!1}}},w=x,y=a("2877"),q=a("6544"),k=a.n(q),V=a("7496"),C=a("8336"),$=a("b0af"),I=a("99d9"),S=a("12b2"),F=a("a523"),O=a("549c"),j=a("169a"),N=a("ce7e"),T=a("0e8f"),P=a("132d"),z=a("adda"),E=a("a722"),B=a("8860"),A=a("490a"),D=a("b56d"),L=a("9910"),M=a("e0c7"),Z=a("2677"),R=Object(y["a"])(w,i,s,!1,null,null,null);R.options.__file="ViewCoach.vue";var H=R.exports;k()(R,{VApp:V["a"],VBtn:C["a"],VCard:$["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:S["a"],VContainer:F["a"],VContent:O["a"],VDialog:j["a"],VDivider:N["a"],VFlex:T["a"],VIcon:P["a"],VImg:z["a"],VLayout:E["a"],VList:B["a"],VProgressCircular:A["a"],VSelect:D["a"],VSpacer:L["a"],VSubheader:M["a"],VTextField:Z["a"]});a("35c4");function J(e){var t=!1;document.querySelector(e).addEventListener("touchstart",function(e){if(1===e.touches.length){var a=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t=0===a}}),document.querySelector(e).addEventListener("touchmove",function(e){t&&(t=!1,e.preventDefault())},{passive:!1})}r["default"].config.productionTip=!1,navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&J("#body-view-coach"),new r["default"]({render:e=>e(H)}).$mount("#view-coach")}});
//# sourceMappingURL=view_coach.44f6c4de.js.map