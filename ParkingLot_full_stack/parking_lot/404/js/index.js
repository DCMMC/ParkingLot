(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){(function(window,document,undefined){"use strict";var counter=0,headCache=document.getElementsByTagName("head")[0],BigIdeasText={DEBUG_MODE:false,DEFAULT_MIN_FONT_SIZE_PX:null,DEFAULT_MAX_FONT_SIZE_PX:528,GLOBAL_STYLE_ID:"bigIdeasText-style",STYLE_ID:"bigIdeasText-id",LINE_CLASS_PREFIX:"bigIdeasText-line",EXEMPT_CLASS:"bigIdeasText-exempt",VIEWPORT_WIDTH:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,test:{wholeNumberFontSizeOnly:function(){if(!("getComputedStyle"in window)||document.body==null){return true}var test=document.createElement("div");test.style.postion="absolute";test.style.fontSize="14.1px";document.body.appendChild(test);var computedStyle=window.getComputedStyle(test,null);document.body.removeChild(test);if(computedStyle){return computedStyle.getPropertyValue("font-size")==="14px"}return true}},supports:{wholeNumberFontSizeOnly:undefined},init:function(){if(BigIdeasText.supports.wholeNumberFontSizeOnly===undefined){BigIdeasText.supports.wholeNumberFontSizeOnly=BigIdeasText.test.wholeNumberFontSizeOnly()}if(!document.getElementById(BigIdeasText.GLOBAL_STYLE_ID)){headCache.appendChild(BigIdeasText.generateStyleTag(BigIdeasText.GLOBAL_STYLE_ID,[".bigIdeasText * { white-space: nowrap; }",".bigIdeasText > * { display: block; }",".bigIdeasText ."+BigIdeasText.EXEMPT_CLASS+", .bigIdeasText ."+BigIdeasText.EXEMPT_CLASS+" * { white-space: normal; }"]))}},bindResize:function(resizeFunction){window.removeEventListener("resize",resizeFunction);window.addEventListener("resize",debounce(resizeFunction,500,true),false)},getStyleId:function(id){return BigIdeasText.STYLE_ID+"-"+id},getViewportWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},generateStyleTag:function(id,css){var styleEl=document.createElement("style");styleEl.innerHTML=css.join("\n");styleEl.setAttribute("id",id);return styleEl},clearCss:function(id){var styleSheets=document.styleSheets;forEach(styleSheets,function(sheetCSS){var sheet=sheetCSS.ownerNode;if(sheet.id===BigIdeasText.getStyleId(id)){return document.head.removeChild(sheet)}})},generateCss:function(id,linesFontSizes,lineWordSpacings,minFontSizes){var css=[];BigIdeasText.clearCss(id);for(var j=0,k=linesFontSizes.length;j<k;j++){css.push("#"+id+" ."+BigIdeasText.LINE_CLASS_PREFIX+j+" {"+(minFontSizes[j]?" white-space: normal;":"")+(linesFontSizes[j]?" font-size: "+linesFontSizes[j]+"px;":"")+(lineWordSpacings[j]?" word-spacing: "+lineWordSpacings[j]+"px;":"")+"}")}return BigIdeasText.generateStyleTag(BigIdeasText.getStyleId(id),css)},mainMethod:function(options){BigIdeasText.init();options=extend({minfontsize:BigIdeasText.DEFAULT_MIN_FONT_SIZE_PX,maxfontsize:BigIdeasText.DEFAULT_MAX_FONT_SIZE_PX,childSelector:"",resize:true},options||{});forEach(this,function(self){var selfStyle=getComputedStyle(self);var maxWidth=parseInt(selfStyle.getPropertyValue("width"),10);var id=self.getAttribute("id");var children=options.childSelector?self.querySelectorAll(options.childSelector):self.children;var minFontSizeAttr=self.getAttribute("bigIdeasText-minfontsize")||false;var maxFontSizeAttr=self.getAttribute("bigIdeasText-maxfontsize")||false;var minFontSize=options.minfontsize;var maxFontSize=options.maxfontsize;if(maxFontSizeAttr!==false){maxFontSize=parseInt(maxFontSizeAttr,10)}if(minFontSizeAttr!==false){minFontSize=parseInt(minFontSizeAttr,10)}addClass(self,"bigIdeasText");if(!id){id=BigIdeasText.getStyleId(counter++);self.setAttribute("id",id)}BigIdeasText.clearCss(id);forEach(children,function(child,lineNumber){child.className=child.className.replace(new RegExp("\\b"+BigIdeasText.LINE_CLASS_PREFIX+"\\d+\\b"),"");addClass(child,BigIdeasText.LINE_CLASS_PREFIX+lineNumber)});var sizes=calculateSizes(self,children,maxWidth,maxFontSize,minFontSize);headCache.appendChild(BigIdeasText.generateCss(id,sizes.fontSizes,sizes.wordSpacings,sizes.minFontSizes))});if(options.resize){var self=this;BigIdeasText.bindResize(function(){if(BigIdeasText.VIEWPORT_WIDTH!==BigIdeasText.getViewportWidth()){BigIdeasText.mainMethod.call(self,options)}BigIdeasText.VIEWPORT_WIDTH=BigIdeasText.getViewportWidth()})}return this}};function forEach(el,fn){if(typeof el.length==="undefined"){el=[el]}if(el.length>=1){Array.prototype.forEach.call(el,fn)}}function getComputedStyle(el,pseudo){pseudo=pseudo||null;if(!BigIdeasText.supports.wholeNumberFontSizeOnly){return window.getComputedStyle(el,pseudo)}}function addClass(el,className){if(el.classList){return el.classList.add(className)}else{return el.className+=" "+className}}function hasClass(el,className){if(el.classList){return el.classList.contains(className)}else{return new RegExp("(^| )"+className+"( |$)","gi").test(el.className)}}function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate){func.apply(context,args)}};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){func.apply(context,args)}}}function extend(out){out=out||{};for(var i=1;i<arguments.length;i++){if(!arguments[i]){continue}for(var key in arguments[i]){if(arguments[i].hasOwnProperty(key)){out[key]=arguments[i][key]}}}return out}function testLineDimensions(line,maxWidth,property,size,interval,units,previousWidth){var width;var currentStyle=getComputedStyle(line);previousWidth=typeof previousWidth==="number"?previousWidth:0;line.style[property]=size+units;width=parseInt(currentStyle.getPropertyValue("width"),10);if(width>=maxWidth){line.style[property]="";if(width===maxWidth){return{match:"exact",size:parseFloat((parseFloat(size)-.1).toFixed(3))}}var under=maxWidth-previousWidth,over=width-maxWidth;return{match:"estimate",size:parseFloat((parseFloat(size)-(property==="word-spacing"&&previousWidth&&over<under?0:interval)).toFixed(3))}}return width}function calculateSizes(t,children,maxWidth,maxFontSize,minFontSize){var c=t.cloneNode(true);var tStyles=getComputedStyle(t);addClass(c,"bigIdeasText-cloned");c.style.fontFamily=tStyles.getPropertyValue("font-family");c.style.textTransform=tStyles.getPropertyValue("text-transform");c.style.wordSpacing=tStyles.getPropertyValue("word-spacing");c.style.letterSpacing=tStyles.getPropertyValue("letter-spacing");c.style.position="absolute";c.style.left=BigIdeasText.DEBUG_MODE?0:-9999;c.style.top=BigIdeasText.DEBUG_MODE?0:-9999;document.body.appendChild(c);var fontSizes=[],wordSpacings=[],minFontSizes=[],ratios=[];forEach(children,function(line){var intervals=BigIdeasText.supports.wholeNumberFontSizeOnly?[8,4,1]:[8,4,1,.1];var lineMax;var newFontSize;line.style.float="left";if(hasClass(line,BigIdeasText.EXEMPT_CLASS)){fontSizes.push(null);ratios.push(null);minFontSizes.push(false);return}var autoGuessSubtraction=32;var currentStyle=getComputedStyle(line);var currentFontSize=parseFloat(currentStyle.getPropertyValue("font-size"));var ratio=(parseInt(currentStyle.getPropertyValue("width"),10)/currentFontSize).toFixed(6);newFontSize=parseInt(maxWidth/ratio,10)-autoGuessSubtraction;outer:for(var m=0,n=intervals.length;m<n;m++){inner:for(var j=1,k=10;j<=k;j++){if(newFontSize+j*intervals[m]>maxFontSize){newFontSize=maxFontSize;break outer}lineMax=testLineDimensions(line,maxWidth,"fontSize",newFontSize+j*intervals[m],intervals[m],"px",lineMax);if(typeof lineMax!=="number"){newFontSize=lineMax.size;if(lineMax.match==="exact"){break outer}break inner}}}ratios.push(maxWidth/newFontSize);if(newFontSize>maxFontSize){fontSizes.push(maxFontSize);minFontSizes.push(false)}else if(!!minFontSize&&newFontSize<minFontSize){fontSizes.push(minFontSize);minFontSizes.push(true)}else{fontSizes.push(newFontSize);minFontSizes.push(false)}});forEach(children,function(line,lineNumber){var wordSpacing=0;var interval=1;var maxWordSpacing;if(hasClass(line,BigIdeasText.EXEMPT_CLASS)){wordSpacings.push(null);return}line.style.fontSize=fontSizes[lineNumber]+"px";for(var m=1,n=3;m<n;m+=interval){maxWordSpacing=testLineDimensions(line,maxWidth,"wordSpacing",m,interval,"px",maxWordSpacing);if(typeof maxWordSpacing!=="number"){wordSpacing=maxWordSpacing.size;break}}line.style.fontSize="";wordSpacings.push(wordSpacing)});forEach(children,function(child){child.removeAttribute("style")});if(!BigIdeasText.DEBUG_MODE){c.parentNode.removeChild(c)}else{c.style.backgroundColor="rgba(255,255,255,.4)"}return{fontSizes:fontSizes,wordSpacings:wordSpacings,ratios:ratios,minFontSizes:minFontSizes}}var bigIdeasText=function(selector,options){BigIdeasText.mainMethod.call(selector,options);return BigIdeasText};if(typeof module==="object"&&typeof module.exports!=="undefined"){module.exports=bigIdeasText}else{window.bigIdeasText=bigIdeasText}})(window,document)},{}],2:[function(require,module,exports){module.exports=require("./lib/classie")},{"./lib/classie":4}],3:[function(require,module,exports){if("document"in self){if(!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))){(function(view){"use strict";if(!("Element"in view)){return}var classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){var i=0,len=this.length;for(;i<len;i++){if(i in this&&this[i]===item){return i}}return-1},DOMEx=function(type,message){this.name=type;this.code=DOMException[type];this.message=message},checkTokenAndGetIndex=function(classList,token){if(token===""){throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(token)){throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character")}return arrIndexOf.call(classList,token)},ClassList=function(elem){var trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;for(;i<len;i++){this.push(classes[i])}this._updateClassName=function(){elem.setAttribute("class",this.toString())}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};DOMEx[protoProp]=Error[protoProp];classListProto.item=function(i){return this[i]||null};classListProto.contains=function(token){token+="";return checkTokenAndGetIndex(this,token)!==-1};classListProto.add=function(){var tokens=arguments,i=0,l=tokens.length,token,updated=false;do{token=tokens[i]+"";if(checkTokenAndGetIndex(this,token)===-1){this.push(token);updated=true}}while(++i<l);if(updated){this._updateClassName()}};classListProto.remove=function(){var tokens=arguments,i=0,l=tokens.length,token,updated=false,index;do{token=tokens[i]+"";index=checkTokenAndGetIndex(this,token);while(index!==-1){this.splice(index,1);updated=true;index=checkTokenAndGetIndex(this,token)}}while(++i<l);if(updated){this._updateClassName()}};classListProto.toggle=function(token,force){token+="";var result=this.contains(token),method=result?force!==true&&"remove":force!==false&&"add";if(method){this[method](token)}if(force===true||force===false){return force}else{return!result}};classListProto.toString=function(){return this.join(" ")};if(objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:true,configurable:true};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){if(ex.number===-2146823252){classListPropDesc.enumerable=false;objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}}}else if(objCtr[protoProp].__defineGetter__){elemCtrProto.__defineGetter__(classListProp,classListGetter)}})(self)}else{(function(){"use strict";var testElement=document.createElement("_");testElement.classList.add("c1","c2");if(!testElement.classList.contains("c2")){var createMethod=function(method){var original=DOMTokenList.prototype[method];DOMTokenList.prototype[method]=function(token){var i,len=arguments.length;for(i=0;i<len;i++){token=arguments[i];original.call(this,token)}}};createMethod("add");createMethod("remove")}testElement.classList.toggle("c3",false);if(testElement.classList.contains("c3")){var _toggle=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(token,force){if(1 in arguments&&!this.contains(token)===!force){return force}else{return _toggle.call(this,token)}}}testElement=null})()}}},{}],4:[function(require,module,exports){"use strict";var classList=require("./class_list_ployfill"),classie;function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)")}function noop(){}function isArr(classes){if(Array.isArray(classes)){return true}else if(Object.prototype.toString.call(classes)==="[object Array]"){return true}else{return false}}function removeMultiple(){var c=arguments[1],elem=arguments[0];c.forEach(function(value){if(classie.has(elem,value)){noop()}classie.removeClass(elem,value)})}function addMultiple(){var c=arguments[1],elem=arguments[0];c.forEach(function(value){if(classie.has(elem,value)){noop()}classie.addClass(elem,value)})}function hasClass(elem,c){return elem.classList.contains(c)}function addClass(elem,c){if(isArr(c)){addMultiple.apply(this,arguments)}else{elem.classList.add(c)}}function removeClass(elem,c){if(isArr(c)){removeMultiple.apply(this,arguments)}else{elem.classList.remove(c)}}function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c)}var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};if(typeof module==="object"&&module&&typeof module.exports==="object"){module.exports=classie}else{define(classie)}},{"./class_list_ployfill":3}],5:[function(require,module,exports){var History=require("history-component"),emitter=require("events").EventEmitter,events=require("dom-events"),util=require("util");module.exports=Editable;function Editable(element,stack){var self=this instanceof Editable;if(!self)return new Editable(element,stack);if(!element)throw new TypeError("expects an element");this.history=new History(stack||[]);this.history.max(100);this.element=element}util.inherits(Editable,emitter);Editable.prototype.contents=function(){return this.element.innerHTML};Editable.prototype.toggle=function(){return"true"==this.element.contentEditable?this.disable():this.enable()};Editable.prototype.enable=function(){this.element.contentEditable=true;events.on(this.element,"keyup",this.onstatechange.bind(this));events.on(this.element,"click",this.onstatechange.bind(this));events.on(this.element,"focus",this.onstatechange.bind(this));events.on(this.element,"paste",this.onchange.bind(this));events.on(this.element,"input",this.onchange.bind(this));this.emit("enable");return this};Editable.prototype.disable=function(){this.element.contentEditable=false;events.off(this.element,"keyup",this.onstatechange.bind(this));events.off(this.element,"click",this.onstatechange.bind(this));events.off(this.element,"focus",this.onstatechange.bind(this));events.off(this.element,"paste",this.onchange.bind(this));events.off(this.element,"input",this.onchange.bind(this));this.emit("disable");return this};Editable.prototype.range=function(){return document.createRange()};Editable.prototype.selection=function(){return window.getSelection()};Editable.prototype.undo=function(){var buf=this.history.prev(),curr=this.element.innerHTML;this.element.innerHTML=buf||curr;buf||this.emit("state");return this};Editable.prototype.redo=function(){var buf=this.history.next(),curr=this.element.innerHTML;this.element.innerHTML=buf||curr;buf||this.emit("state");return this};Editable.prototype.execute=function(cmd,val){document.execCommand(cmd,false,val);this.onstatechange();return this};Editable.prototype.state=function(cmd){var length=this.history.vals.length-1,stack=this.history;if("undo"==cmd)return 0<stack.i;if("redo"==cmd)return length>stack.i;return document.queryCommandState(cmd)};Editable.prototype.onstatechange=function(e){this.emit("state",e);return this};Editable.prototype.onchange=function(e){this.history.add(this.contents());return this.emit("change",e)}},{"dom-events":7,events:9,"history-component":16,util:31}],6:[function(require,module,exports){(function(window){"use strict";var document=window.document;var queue=[];function docReady(fn){if(typeof fn!=="function"){return}if(docReady.isReady){fn()}else{queue.push(fn)}}docReady.isReady=false;function init(event){var isIE8NotReady=event.type==="readystatechange"&&document.readyState!=="complete";if(docReady.isReady||isIE8NotReady){return}docReady.isReady=true;for(var i=0,len=queue.length;i<len;i++){var fn=queue[i];fn()}}function defineDocReady(eventie){eventie.bind(document,"DOMContentLoaded",init);eventie.bind(document,"readystatechange",init);eventie.bind(window,"load",init);return docReady}if(typeof define==="function"&&define.amd){docReady.isReady=typeof requirejs==="function";define(["eventie/eventie"],defineDocReady)}else if(typeof exports==="object"){module.exports=defineDocReady(require("eventie"))}else{window.docReady=defineDocReady(window.eventie)}})(window)},{eventie:8}],7:[function(require,module,exports){var synth=require("synthetic-dom-events");var on=function(element,name,fn,capture){return element.addEventListener(name,fn,capture||false)};var off=function(element,name,fn,capture){return element.removeEventListener(name,fn,capture||false)};var once=function(element,name,fn,capture){function tmp(ev){off(element,name,tmp,capture);fn(ev)}on(element,name,tmp,capture)};var emit=function(element,name,opt){var ev=synth(name,opt);element.dispatchEvent(ev)};if(!document.addEventListener){on=function(element,name,fn){return element.attachEvent("on"+name,fn)}}if(!document.removeEventListener){off=function(element,name,fn){return element.detachEvent("on"+name,fn)}}if(!document.dispatchEvent){emit=function(element,name,opt){var ev=synth(name,opt);return element.fireEvent("on"+ev.type,ev)}}module.exports={on:on,off:off,once:once,emit:emit}},{"synthetic-dom-events":25}],8:[function(require,module,exports){(function(window){"use strict";var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event}if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,false)}}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event)}:function(){var event=getIEEvent(obj);fn.call(obj,event)};obj.attachEvent("on"+type,obj[type+fn])}}var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,false)}}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn]}catch(err){obj[type+fn]=undefined}}}var eventie={bind:bind,unbind:unbind};if(typeof define==="function"&&define.amd){define(eventie)}else if(typeof exports==="object"){module.exports=eventie}else{window.eventie=eventie}})(window)},{}],9:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+")");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],10:[function(require,module,exports){(function(){function setFavicon(href){var head=document.head=document.getElementsByTagName("head")[0];var faviconId="favicon";var link=document.createElement("link");var oldLink=document.getElementById(faviconId);link.id=faviconId;link.rel="shortcut icon";link.href=href;if(oldLink){head.removeChild(oldLink)}head.appendChild(link);return this}if(typeof module!=="undefined"){module.exports=setFavicon}else if(typeof $!=="undefined"){$.setFavicon=setFavicon}else{window.setFavicon=setFavicon}})()},{}],11:[function(require,module,exports){(function(global){(function(w){"use strict";var loadCSS=function(href,before,media){var doc=w.document;var ss=doc.createElement("link");var ref;if(before){ref=before}else{var refs=(doc.body||doc.getElementsByTagName("head")[0]).childNodes;ref=refs[refs.length-1]}var sheets=doc.styleSheets;ss.rel="stylesheet";ss.href=href;ss.media="only x";ref.parentNode.insertBefore(ss,before?ref:ref.nextSibling);var onloadcssdefined=function(cb){var resolvedHref=ss.href;var i=sheets.length;while(i--){if(sheets[i].href===resolvedHref){return cb()}}setTimeout(function(){onloadcssdefined(cb)})};ss.onloadcssdefined=onloadcssdefined;onloadcssdefined(function(){ss.media=media||"all"});return ss};if(typeof module!=="undefined"){module.exports=loadCSS}else{w.loadCSS=loadCSS}})(typeof global!=="undefined"?global:this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],12:[function(require,module,exports){module.exports=function(elements,options){var options=options||{};var baseline=options.baseline||16;var paddingY=options.paddingY||0;var doc=options.doc||document;var bounding=typeof doc.createElementNS("http://www.w3.org/2000/svg","svg").getBoundingClientRect==="function";for(var i=0;i<elements.length;i++){var content=elements[i].textContent;var svg=doc.createElementNS("http://www.w3.org/2000/svg","svg");var text=doc.createElementNS("http://www.w3.org/2000/svg","text");var rect;text.textContent=content;text.setAttribute("x","50%");text.setAttribute("y",baseline);text.setAttribute("font-family","inherit");text.setAttribute("font-size","1rem");text.setAttribute("font-weight","inherit");text.setAttribute("style","text-anchor:middle");for(var j=0;j<elements[i].attributes.length;j++){svg.setAttribute(elements[i].attributes[j].name,elements[i].attributes[j].value)}svg.setAttribute("width","100%");svg.setAttribute("style","max-height:100%");svg.setAttribute("fill","currentcolor");svg.setAttribute("overflow","visible");svg.appendChild(text);elements[i].parentNode.replaceChild(svg,elements[i]);rect=bounding?text.getBoundingClientRect():{};rect.width=rect.width||text.offsetWidth||text.getComputedTextLength();rect.height=rect.height||text.offsetHeight||24;svg.setAttribute("viewBox","0 0 "+Math.round(rect.width)+" "+(Math.round(rect.height)+paddingY))}}},{}],13:[function(require,module,exports){var ua=require("vigour-ua");module.exports=function(){if(typeof document==="undefined"){return false}else{if(document.body.style["fontFeatureSettings"]===""||document.body.style["webkitFontFeatureSettings"]===""){var agent=ua(navigator.userAgent);if(agent.browser==="safari"&&agent.version<9.1){return false}else{return true}}else if(document.body.style["mozFontFeatureSettings"]===""||document.body.style["MozFontFeatureSettings"]===""||typeof document.body.style["msFontFeatureSettings"]===""){return true}return false}}},{"vigour-ua":32}],14:[function(require,module,exports){(function(){"use strict";var f,g=[];function l(a){g.push(a);1==g.length&&f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&&b(h)}}var e=0,h=[];0==a.length&&b(h);for(var k=0;k<a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d<a.length;d+=1)u(a[d]).c(b,c)})}window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g)})();(function(){"use strict";var h=!!document.addEventListener;function k(a,b){h?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function w(a){document.body?a():h?document.addEventListener("DOMContentLoaded",a):document.onreadystatechange=function(){"interactive"==document.readyState&&a()}}function x(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.f.style.cssText="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}function y(a,b){a.a.style.cssText="min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+b+";"}function z(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function A(a,b){function c(){var a=l;z(a)&&null!==a.a.parentNode&&b(a.g)}var l=a;k(a.b,c);k(a.c,c);z(a)}function B(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var C=null,D=null,H=!!window.FontFace;function I(){if(null===D){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}D=""!==a.style.font}return D}function J(a,b){return[a.style,a.weight,I()?a.stretch:"","100px",b].join(" ")}B.prototype.a=function(a,b){var c=this,l=a||"BESbswy",E=b||3e3,F=(new Date).getTime();return new Promise(function(a,b){if(H){var q=function(){(new Date).getTime()-F>=E?b(c):document.fonts.load(J(c,c.family),l).then(function(b){1<=b.length?a(c):setTimeout(q,25)},function(){b(c)})};q()}else w(function(){function r(){var b;if(b=-1!=e&&-1!=f||-1!=e&&-1!=g||-1!=f&&-1!=g)(b=e!=f&&e!=g&&f!=g)||(null===C&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),C=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),
b=C&&(e==t&&f==t&&g==t||e==u&&f==u&&g==u||e==v&&f==v&&g==v)),b=!b;b&&(null!==d.parentNode&&d.parentNode.removeChild(d),clearTimeout(G),a(c))}function q(){if((new Date).getTime()-F>=E)null!==d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||void 0===a)e=m.a.offsetWidth,f=n.a.offsetWidth,g=p.a.offsetWidth,r();G=setTimeout(q,50)}}var m=new x(l),n=new x(l),p=new x(l),e=-1,f=-1,g=-1,t=-1,u=-1,v=-1,d=document.createElement("div"),G=0;d.dir="ltr";y(m,J(c,"sans-serif"));y(n,J(c,"serif"));y(p,J(c,"monospace"));d.appendChild(m.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);t=m.a.offsetWidth;u=n.a.offsetWidth;v=p.a.offsetWidth;q();A(m,function(a){e=a;r()});y(m,J(c,'"'+c.family+'",sans-serif'));A(n,function(a){f=a;r()});y(n,J(c,'"'+c.family+'",serif'));A(p,function(a){g=a;r()});y(p,J(c,'"'+c.family+'",monospace'))})})};window.FontFaceObserver=B;window.FontFaceObserver.prototype.check=B.prototype.a;"undefined"!==typeof module&&(module.exports=window.FontFaceObserver)})()},{}],15:[function(require,module,exports){(function(){"use strict";var h=!!document.addEventListener;function k(a,b){h?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function w(a){document.body?a():h?document.addEventListener("DOMContentLoaded",a):document.onreadystatechange=function(){"interactive"==document.readyState&&a()}}function x(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.f.style.cssText="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}function y(a,b){a.a.style.cssText="min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+b+";"}function z(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function A(a,b){function c(){var a=l;z(a)&&null!==a.a.parentNode&&b(a.g)}var l=a;k(a.b,c);k(a.c,c);z(a)}function B(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var C=null,D=null,H=!!window.FontFace;function I(){if(null===D){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}D=""!==a.style.font}return D}function J(a,b){return[a.style,a.weight,I()?a.stretch:"","100px",b].join(" ")}B.prototype.a=function(a,b){var c=this,l=a||"BESbswy",E=b||3e3,F=(new Date).getTime();return new Promise(function(a,b){if(H){var q=function(){(new Date).getTime()-F>=E?b(c):document.fonts.load(J(c,c.family),l).then(function(b){1<=b.length?a(c):setTimeout(q,25)},function(){b(c)})};q()}else w(function(){function r(){var b;if(b=-1!=e&&-1!=f||-1!=e&&-1!=g||-1!=f&&-1!=g)(b=e!=f&&e!=g&&f!=g)||(null===C&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),C=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=C&&(e==t&&f==t&&g==t||e==u&&f==u&&g==u||e==v&&f==v&&g==v)),b=!b;b&&(null!==d.parentNode&&d.parentNode.removeChild(d),clearTimeout(G),a(c))}function q(){if((new Date).getTime()-F>=E)null!==d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||void 0===a)e=m.a.offsetWidth,f=n.a.offsetWidth,g=p.a.offsetWidth,r();G=setTimeout(q,50)}}var m=new x(l),n=new x(l),p=new x(l),e=-1,f=-1,g=-1,t=-1,u=-1,v=-1,d=document.createElement("div"),G=0;d.dir="ltr";y(m,J(c,"sans-serif"));y(n,J(c,"serif"));y(p,J(c,"monospace"));d.appendChild(m.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);t=m.a.offsetWidth;u=n.a.offsetWidth;v=p.a.offsetWidth;q();A(m,function(a){e=a;r()});y(m,J(c,'"'+c.family+'",sans-serif'));A(n,function(a){f=a;r()});y(n,J(c,'"'+c.family+'",serif'));A(p,function(a){g=a;r()});y(p,J(c,'"'+c.family+'",monospace'))})})};window.FontFaceObserver=B;window.FontFaceObserver.prototype.check=B.prototype.a;"undefined"!==typeof module&&(module.exports=window.FontFaceObserver)})()},{}],16:[function(require,module,exports){module.exports=History;function History(vals){this.vals=vals||[];this.reset();this.max(1e3)}History.prototype.cap=function(){var max=this._max;var len=this.vals.length;var remove=len-max;if(remove<=0)return;while(remove--)this.vals.shift();this.reset()};History.prototype.max=function(n){this._max=n;this.cap();return this};History.prototype.add=function(val){this.i=this.vals.push(val)-1;this.cap();return this};History.prototype.prev=function(){if(this.i<0)return;return this.vals[this.i--]};History.prototype.next=function(){var len=this.vals.length;if(this.i==len-1)return;return this.vals[++this.i]};History.prototype.reset=function(){this.i=this.vals.length-1;return this}},{}],17:[function(require,module,exports){var TAU=Math.PI*2;var round=Math.round;var min=Math.min;var max=Math.max;var ceil=Math.ceil;module.exports=hsv2rgb;function set(r,g,b,out){out[0]=round(r*255);out[1]=round(g*255);out[2]=round(b*255)}function clamp(v,l,u){return max(l,min(v,u))}function hsv2rgb(h,s,v,out){out=out||[0,0,0];h=h%360;s=clamp(s,0,1);v=clamp(v,0,1);if(!s){out[0]=out[1]=out[2]=ceil(v*255)}else{var b=(1-s)*v;var vb=v-b;var hm=h%60;switch(h/60|0){case 0:set(v,vb*h/60+b,b,out);break;case 1:set(vb*(60-hm)/60+b,v,b,out);break;case 2:set(b,v,vb*hm/60+b,out);break;case 3:set(b,vb*(60-hm)/60+b,v,out);break;case 4:set(vb*hm/60+b,b,v,out);break;case 5:set(v,b,vb*(60-hm)/60+b,out);break}}return out}},{}],18:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],19:[function(require,module,exports){var funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;function isObjectLike(value){return!!value&&typeof value=="object"}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objToString=objectProto.toString;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=getNative},{}],20:[function(require,module,exports){var getNative=require("lodash._getnative");var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max,nativeNow=getNative(Date,"now");var now=nativeNow||function(){return(new Date).getTime()};function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=!!options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?!!options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}lastCalled=0;maxTimeoutId=timeoutId=trailingCall=undefined}function complete(isCalled,id){if(id){clearTimeout(id)}maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=undefined}}}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){complete(trailingCall,maxTimeoutId)}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){complete(trailing,timeoutId)}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=undefined}return result}debounced.cancel=cancel;return debounced}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=debounce},{"lodash._getnative":19}],21:[function(require,module,exports){var debounce=require("lodash.debounce");var FUNC_ERROR_TEXT="Expected a function";function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:+wait,trailing:trailing})}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=throttle},{"lodash.debounce":20}],22:[function(require,module,exports){(function(global){(function(){var block={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:noop,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:noop,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:noop,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};block.bullet=/(?:[*+-]|\d+\.)/;block.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;block.item=replace(block.item,"gm")(/bull/g,block.bullet)();block.list=replace(block.list)(/bull/g,block.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+block.def.source+")")();block.blockquote=replace(block.blockquote)("def",block.def)();block._tag="(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code"+"|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo"+"|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b";block.html=replace(block.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,block._tag)();block.paragraph=replace(block.paragraph)("hr",block.hr)("heading",block.heading)("lheading",block.lheading)("blockquote",block.blockquote)("tag","<"+block._tag)("def",block.def)();block.normal=merge({},block);block.gfm=merge({},block.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/});block.gfm.paragraph=replace(block.paragraph)("(?!","(?!"+block.gfm.fences.source.replace("\\1","\\2")+"|"+block.list.source.replace("\\1","\\3")+"|")();block.tables=merge({},block.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});function Lexer(options){this.tokens=[];this.tokens.links={};this.options=options||marked.defaults;this.rules=block.normal;if(this.options.gfm){if(this.options.tables){this.rules=block.tables}else{this.rules=block.gfm}}}Lexer.rules=block;Lexer.lex=function(src,options){var lexer=new Lexer(options);return lexer.lex(src)};Lexer.prototype.lex=function(src){src=src.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(src,true)};Lexer.prototype.token=function(src,top,bq){var src=src.replace(/^ +$/gm,""),next,loose,cap,bull,b,item,space,i,l;while(src){if(cap=this.rules.newline.exec(src)){src=src.substring(cap[0].length);if(cap[0].length>1){this.tokens.push({type:"space"})}}if(cap=this.rules.code.exec(src)){src=src.substring(cap[0].length);cap=cap[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:!this.options.pedantic?cap.replace(/\n+$/,""):cap});continue}if(cap=this.rules.fences.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"code",lang:cap[2],text:cap[3]||""});continue}if(cap=this.rules.heading.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"heading",depth:cap[1].length,text:cap[2]});continue}if(top&&(cap=this.rules.nptable.exec(src))){src=src.substring(cap[0].length);item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/\n$/,"").split("\n")};for(i=0;i<item.align.length;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}for(i=0;i<item.cells.length;i++){item.cells[i]=item.cells[i].split(/ *\| */)}this.tokens.push(item);continue}if(cap=this.rules.lheading.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"heading",depth:cap[2]==="="?1:2,text:cap[1]});continue}if(cap=this.rules.hr.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"hr"});continue}if(cap=this.rules.blockquote.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"blockquote_start"});cap=cap[0].replace(/^ *> ?/gm,"");this.token(cap,top,true);this.tokens.push({type:"blockquote_end"});continue}if(cap=this.rules.list.exec(src)){src=src.substring(cap[0].length);bull=cap[2];this.tokens.push({type:"list_start",ordered:bull.length>1});cap=cap[0].match(this.rules.item);next=false;l=cap.length;i=0;for(;i<l;i++){item=cap[i];space=item.length;item=item.replace(/^ *([*+-]|\d+\.) +/,"");if(~item.indexOf("\n ")){space-=item.length;item=!this.options.pedantic?item.replace(new RegExp("^ {1,"+space+"}","gm"),""):item.replace(/^ {1,4}/gm,"")}if(this.options.smartLists&&i!==l-1){b=block.bullet.exec(cap[i+1])[0];if(bull!==b&&!(bull.length>1&&b.length>1)){src=cap.slice(i+1).join("\n")+src;i=l-1}}loose=next||/\n\n(?!\s*$)/.test(item);if(i!==l-1){next=item.charAt(item.length-1)==="\n";if(!loose)loose=next}this.tokens.push({type:loose?"loose_item_start":"list_item_start"});this.token(item,false,bq);this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"});continue}if(cap=this.rules.html.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(cap[1]==="pre"||cap[1]==="script"||cap[1]==="style"),text:cap[0]});continue}if(!bq&&top&&(cap=this.rules.def.exec(src))){src=src.substring(cap[0].length);this.tokens.links[cap[1].toLowerCase()]={href:cap[2],title:cap[3]};continue}if(top&&(cap=this.rules.table.exec(src))){src=src.substring(cap[0].length);item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(i=0;i<item.align.length;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}for(i=0;i<item.cells.length;i++){item.cells[i]=item.cells[i].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this.tokens.push(item);continue}if(top&&(cap=this.rules.paragraph.exec(src))){src=src.substring(cap[0].length);this.tokens.push({type:"paragraph",text:cap[1].charAt(cap[1].length-1)==="\n"?cap[1].slice(0,-1):cap[1]});continue}if(cap=this.rules.text.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"text",text:cap[0]});continue}if(src){throw new Error("Infinite loop on byte: "+src.charCodeAt(0))}}return this.tokens};var inline={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:noop,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:noop,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};inline._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/;inline._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;inline.link=replace(inline.link)("inside",inline._inside)("href",inline._href)();inline.reflink=replace(inline.reflink)("inside",inline._inside)();inline.normal=merge({},inline);inline.pedantic=merge({},inline.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});inline.gfm=merge({},inline.normal,{escape:replace(inline.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:replace(inline.text)("]|","~]|")("|","|https?://|")()});inline.breaks=merge({},inline.gfm,{br:replace(inline.br)("{2,}","*")(),text:replace(inline.gfm.text)("{2,}","*")()});function InlineLexer(links,options){this.options=options||marked.defaults;this.links=links;this.rules=inline.normal;this.renderer=this.options.renderer||new Renderer;this.renderer.options=this.options;if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=inline.breaks}else{this.rules=inline.gfm}}else if(this.options.pedantic){this.rules=inline.pedantic}}InlineLexer.rules=inline;InlineLexer.output=function(src,links,options){var inline=new InlineLexer(links,options);return inline.output(src)};InlineLexer.prototype.output=function(src){var out="",link,text,href,cap;while(src){if(cap=this.rules.escape.exec(src)){src=src.substring(cap[0].length);out+=cap[1];continue}if(cap=this.rules.autolink.exec(src)){src=src.substring(cap[0].length);if(cap[2]==="@"){text=cap[1].charAt(6)===":"?this.mangle(cap[1].substring(7)):this.mangle(cap[1]);href=this.mangle("mailto:")+text}else{text=escape(cap[1]);href=text}out+=this.renderer.link(href,null,text);continue}if(!this.inLink&&(cap=this.rules.url.exec(src))){src=src.substring(cap[0].length);text=escape(cap[1]);href=text;out+=this.renderer.link(href,null,text);continue}if(cap=this.rules.tag.exec(src)){if(!this.inLink&&/^<a /i.test(cap[0])){this.inLink=true}else if(this.inLink&&/^<\/a>/i.test(cap[0])){this.inLink=false}src=src.substring(cap[0].length);out+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(cap[0]):escape(cap[0]):cap[0];continue}if(cap=this.rules.link.exec(src)){src=src.substring(cap[0].length);this.inLink=true;out+=this.outputLink(cap,{href:cap[2],title:cap[3]});this.inLink=false;continue}if((cap=this.rules.reflink.exec(src))||(cap=this.rules.nolink.exec(src))){src=src.substring(cap[0].length);link=(cap[2]||cap[1]).replace(/\s+/g," ");link=this.links[link.toLowerCase()];if(!link||!link.href){out+=cap[0].charAt(0);src=cap[0].substring(1)+src;continue}this.inLink=true;out+=this.outputLink(cap,link);this.inLink=false;continue}if(cap=this.rules.strong.exec(src)){src=src.substring(cap[0].length);out+=this.renderer.strong(this.output(cap[2]||cap[1]));continue}if(cap=this.rules.em.exec(src)){src=src.substring(cap[0].length);out+=this.renderer.em(this.output(cap[2]||cap[1]));continue}if(cap=this.rules.code.exec(src)){src=src.substring(cap[0].length);out+=this.renderer.codespan(escape(cap[2],true));continue}if(cap=this.rules.br.exec(src)){src=src.substring(cap[0].length);out+=this.renderer.br();continue}if(cap=this.rules.del.exec(src)){src=src.substring(cap[0].length);out+=this.renderer.del(this.output(cap[1]));continue}if(cap=this.rules.text.exec(src)){src=src.substring(cap[0].length);out+=this.renderer.text(escape(this.smartypants(cap[0])));continue}if(src){throw new Error("Infinite loop on byte: "+src.charCodeAt(0))}}return out};InlineLexer.prototype.outputLink=function(cap,link){var href=escape(link.href),title=link.title?escape(link.title):null;return cap[0].charAt(0)!=="!"?this.renderer.link(href,title,this.output(cap[1])):this.renderer.image(href,title,escape(cap[1]))};InlineLexer.prototype.smartypants=function(text){if(!this.options.smartypants)return text;return text.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")};InlineLexer.prototype.mangle=function(text){if(!this.options.mangle)return text;var out="",l=text.length,i=0,ch;for(;i<l;i++){ch=text.charCodeAt(i);if(Math.random()>.5){ch="x"+ch.toString(16)}out+="&#"+ch+";"}return out};function Renderer(options){this.options=options||{}}Renderer.prototype.code=function(code,lang,escaped){if(this.options.highlight){var out=this.options.highlight(code,lang);if(out!=null&&out!==code){escaped=true;code=out}}if(!lang){return"<pre><code>"+(escaped?code:escape(code,true))+"\n</code></pre>"}return'<pre><code class="'+this.options.langPrefix+escape(lang,true)+'">'+(escaped?code:escape(code,true))+"\n</code></pre>\n"};Renderer.prototype.blockquote=function(quote){return"<blockquote>\n"+quote+"</blockquote>\n"};Renderer.prototype.html=function(html){return html};Renderer.prototype.heading=function(text,level,raw){return"<h"+level+' id="'+this.options.headerPrefix+raw.toLowerCase().replace(/[^\w]+/g,"-")+'">'+text+"</h"+level+">\n"};Renderer.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"};Renderer.prototype.list=function(body,ordered){var type=ordered?"ol":"ul";return"<"+type+">\n"+body+"</"+type+">\n"};Renderer.prototype.listitem=function(text){return"<li>"+text+"</li>\n"};Renderer.prototype.paragraph=function(text){return"<p>"+text+"</p>\n"};Renderer.prototype.table=function(header,body){return"<table>\n"+"<thead>\n"+header+"</thead>\n"+"<tbody>\n"+body+"</tbody>\n"+"</table>\n"};Renderer.prototype.tablerow=function(content){return"<tr>\n"+content+"</tr>\n"};Renderer.prototype.tablecell=function(content,flags){var type=flags.header?"th":"td";var tag=flags.align?"<"+type+' style="text-align:'+flags.align+'">':"<"+type+">";return tag+content+"</"+type+">\n"};Renderer.prototype.strong=function(text){return"<strong>"+text+"</strong>"};Renderer.prototype.em=function(text){return"<em>"+text+"</em>"};Renderer.prototype.codespan=function(text){return"<code>"+text+"</code>"};Renderer.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"};Renderer.prototype.del=function(text){return"<del>"+text+"</del>"};Renderer.prototype.link=function(href,title,text){if(this.options.sanitize){try{var prot=decodeURIComponent(unescape(href)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(prot.indexOf("javascript:")===0||prot.indexOf("vbscript:")===0){return""}}var out='<a href="'+href+'"';if(title){out+=' title="'+title+'"'}out+=">"+text+"</a>";return out};Renderer.prototype.image=function(href,title,text){var out='<img src="'+href+'" alt="'+text+'"';if(title){out+=' title="'+title+'"'}out+=this.options.xhtml?"/>":">";return out};Renderer.prototype.text=function(text){return text};function Parser(options){this.tokens=[];this.token=null;this.options=options||marked.defaults;this.options.renderer=this.options.renderer||new Renderer;this.renderer=this.options.renderer;this.renderer.options=this.options}Parser.parse=function(src,options,renderer){var parser=new Parser(options,renderer);return parser.parse(src)};Parser.prototype.parse=function(src){this.inline=new InlineLexer(src.links,this.options,this.renderer);this.tokens=src.reverse();var out="";while(this.next()){out+=this.tok()}return out};Parser.prototype.next=function(){return this.token=this.tokens.pop()};Parser.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};Parser.prototype.parseText=function(){var body=this.token.text;while(this.peek().type==="text"){body+="\n"+this.next().text}return this.inline.output(body)};Parser.prototype.tok=function(){switch(this.token.type){case"space":{return""}case"hr":{return this.renderer.hr()}case"heading":{return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text)}case"code":{return this.renderer.code(this.token.text,this.token.lang,this.token.escaped)}case"table":{var header="",body="",i,row,cell,flags,j;cell="";for(i=0;i<this.token.header.length;i++){flags={header:true,align:this.token.align[i]};cell+=this.renderer.tablecell(this.inline.output(this.token.header[i]),{header:true,align:this.token.align[i]})}header+=this.renderer.tablerow(cell);for(i=0;i<this.token.cells.length;i++){row=this.token.cells[i];cell="";for(j=0;j<row.length;j++){cell+=this.renderer.tablecell(this.inline.output(row[j]),{header:false,align:this.token.align[j]})}body+=this.renderer.tablerow(cell)}return this.renderer.table(header,body)}case"blockquote_start":{var body="";while(this.next().type!=="blockquote_end"){body+=this.tok()}return this.renderer.blockquote(body)}case"list_start":{var body="",ordered=this.token.ordered;while(this.next().type!=="list_end"){body+=this.tok()}return this.renderer.list(body,ordered)}case"list_item_start":{var body="";while(this.next().type!=="list_item_end"){body+=this.token.type==="text"?this.parseText():this.tok()}return this.renderer.listitem(body)}case"loose_item_start":{var body="";while(this.next().type!=="list_item_end"){body+=this.tok()}return this.renderer.listitem(body)}case"html":{var html=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;return this.renderer.html(html)}case"paragraph":{return this.renderer.paragraph(this.inline.output(this.token.text))}case"text":{return this.renderer.paragraph(this.parseText())}}};function escape(html,encode){return html.replace(!encode?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function unescape(html){return html.replace(/&([#\w]+);/g,function(_,n){n=n.toLowerCase();if(n==="colon")return":";if(n.charAt(0)==="#"){return n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1))}return""})}function replace(regex,opt){regex=regex.source;opt=opt||"";return function self(name,val){if(!name)return new RegExp(regex,opt);val=val.source||val;val=val.replace(/(^|[^\[])\^/g,"$1");regex=regex.replace(name,val);return self}}function noop(){}noop.exec=noop;function merge(obj){var i=1,target,key;for(;i<arguments.length;i++){target=arguments[i];for(key in target){if(Object.prototype.hasOwnProperty.call(target,key)){obj[key]=target[key]}}}return obj}function marked(src,opt,callback){if(callback||typeof opt==="function"){if(!callback){callback=opt;opt=null}opt=merge({},marked.defaults,opt||{});var highlight=opt.highlight,tokens,pending,i=0;try{tokens=Lexer.lex(src,opt)}catch(e){return callback(e)}pending=tokens.length;var done=function(err){if(err){opt.highlight=highlight;return callback(err)}var out;try{out=Parser.parse(tokens,opt)}catch(e){err=e}opt.highlight=highlight;return err?callback(err):callback(null,out)};if(!highlight||highlight.length<3){return done()}delete opt.highlight;if(!pending)return done();for(;i<tokens.length;i++){(function(token){if(token.type!=="code"){return--pending||done()}return highlight(token.text,token.lang,function(err,code){if(err)return done(err);if(code==null||code===token.text){return--pending||done()}token.text=code;token.escaped=true;--pending||done()})})(tokens[i])}return}try{if(opt)opt=merge({},marked.defaults,opt);return Parser.parse(Lexer.lex(src,opt),opt)}catch(e){e.message+="\nPlease report this to https://github.com/chjj/marked.";if((opt||marked.defaults).silent){return"<p>An error occured:</p><pre>"+escape(e.message+"",true)+"</pre>"}throw e}}marked.options=marked.setOptions=function(opt){merge(marked.defaults,opt);return marked};marked.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,sanitizer:null,mangle:true,smartLists:false,silent:false,highlight:null,langPrefix:"lang-",smartypants:false,headerPrefix:"",renderer:new Renderer,xhtml:false};marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.InlineLexer=InlineLexer;marked.inlineLexer=InlineLexer.output;marked.parse=marked;if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=marked}else if(typeof define==="function"&&define.amd){define(function(){return marked})}else{this.marked=marked}}).call(function(){return this||(typeof window!=="undefined"?window:global)}())}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],23:[function(require,module,exports){module.exports=OnPrint;var EventEmitter=require("events").EventEmitter,inherits=require("inherits");function OnPrint(){EventEmitter.call(this)}inherits(OnPrint,EventEmitter);OnPrint.prototype.on=function(event,fn){switch(event){case"before":case"after":EventEmitter.prototype.on.apply(this,arguments);break;default:throw new Error('Incorrect event type. It must be "before" or "after"')}return this};OnPrint.prototype.start=function(cb){var emitter=this;if(window.matchMedia){var mediaQueryList=window.matchMedia("print");mediaQueryList.addListener(function(mql){if(mql.matches){emitter.emit("before")}else{emitter.emit("after")}})}window.onbeforeprint=function(){emitter.emit("before")};window.onafterprint=function(){emitter.emit("after")};if(cb)cb()}},{events:9,inherits:18}],24:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;
return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],25:[function(require,module,exports){var win=window;var doc=document||{};var root=doc.documentElement||{};var use_key_event=true;try{doc.createEvent("KeyEvents")}catch(err){use_key_event=false}function check_kb(ev,opts){if(ev.ctrlKey!=(opts.ctrlKey||false)||ev.altKey!=(opts.altKey||false)||ev.shiftKey!=(opts.shiftKey||false)||ev.metaKey!=(opts.metaKey||false)||ev.keyCode!=(opts.keyCode||0)||ev.charCode!=(opts.charCode||0)){ev=document.createEvent("Event");ev.initEvent(opts.type,opts.bubbles,opts.cancelable);ev.ctrlKey=opts.ctrlKey||false;ev.altKey=opts.altKey||false;ev.shiftKey=opts.shiftKey||false;ev.metaKey=opts.metaKey||false;ev.keyCode=opts.keyCode||0;ev.charCode=opts.charCode||0}return ev}var modern=function(type,opts){opts=opts||{};var family=typeOf(type);var init_fam=family;if(family==="KeyboardEvent"&&use_key_event){family="KeyEvents";init_fam="KeyEvent"}var ev=doc.createEvent(family);var init_fn="init"+init_fam;var init=typeof ev[init_fn]==="function"?init_fn:"initEvent";var sig=initSignatures[init];var args=[];var used={};opts.type=type;for(var i=0;i<sig.length;++i){var key=sig[i];var val=opts[key];if(val===undefined){val=ev[key]}used[key]=true;args.push(val)}ev[init].apply(ev,args);if(family==="KeyboardEvent"){ev=check_kb(ev,opts)}for(var key in opts){if(!used[key]){ev[key]=opts[key]}}return ev};var legacy=function(type,opts){opts=opts||{};var ev=doc.createEventObject();ev.type=type;for(var key in opts){if(opts[key]!==undefined){ev[key]=opts[key]}}return ev};module.exports=doc.createEvent?modern:legacy;var initSignatures=require("./init.json");var types=require("./types.json");var typeOf=function(){var typs={};for(var key in types){var ts=types[key];for(var i=0;i<ts.length;i++){typs[ts[i]]=key}}return function(name){return typs[name]||"Event"}}()},{"./init.json":26,"./types.json":27}],26:[function(require,module,exports){module.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],27:[function(require,module,exports){module.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],28:[function(require,module,exports){(function(root){var typogr=function(obj){return new Wrapper(obj)};typogr.version="0.6.6";if(typeof module!=="undefined"&&module.exports){module.exports=typogr}else if(typeof define==="function"&&define.amd){define(function(){return typogr})}else{root.typogr=typogr}var re=function(regexp,flag){return new RegExp(regexp,flag)};var re_skip_tags=/<(\/)?(style|pre|code|kbd|script|math|title)[^>]*>/i;var amp=typogr.amp=function(text){var re_amp=/(\s|&nbsp;)(&|&amp;|&\#38;)(\s|&nbsp;)/g,re_intra_tag=/(<[^<]*>)?([^<]*)(<\/[^<]*>)?/g;if(!text&&typeof text!=="string"){return}return text.replace(re_intra_tag,function(str,prefix,text,suffix){prefix=prefix||"";suffix=suffix||"";if(prefix.match(re_skip_tags))return prefix+text+suffix;text=text.replace(re_amp,'$1<span class="amp">&amp;</span>$3');return prefix+text+suffix})};var ord=typogr.ord=function(text){if(!text&&typeof text!=="string"){return}var tokens=tokenize(text),result=[],in_skipped_tag=false,close_match,re_suffix=/(\d+)(st|nd|rd|th)/g;tokens.forEach(function(token){if(token.type==="tag"){result.push(token.txt);close_match=re_skip_tags.exec(token.txt);if(close_match&&close_match[1]===undefined){in_skipped_tag=true}else{in_skipped_tag=false}}else{if(in_skipped_tag){result.push(token.txt)}else{result.push(token.txt.replace(re_suffix,'$1<span class="ord">$2</span>'))}}});return result.join("")};var initQuotes=typogr.initQuotes=function(text){var re_quote=re("(?:(?:<(?:p|h[1-6]|li|dt|dd)[^>]*>|^)"+"\\s*"+"(?:<(?:a|em|span|strong|i|b)[^>]*>\\s*)*)"+'(?:("|&ldquo;|&#8220;)|'+"('|&lsquo;|&#8216;))","i");if(!text&&typeof text!=="string"){return}return text.replace(re_quote,function(matched_str,dquo,squo){var classname=dquo?"dquo":"quo",quote=dquo?dquo:squo;return[matched_str.slice(0,matched_str.lastIndexOf(quote)),'<span class="',classname,'">',quote,"</span>"].join("")})};var widont=typogr.widont=function(text){var inline_tags="a|em|span|strong|i|b";var word="(?:<(?:"+inline_tags+")[^>]*?>)*?[^\\s<>]+(?:</(?:"+inline_tags+")[^>]*?>)*?";var re_widont=re("("+"\\s+"+word+"\\s+"+word+")"+"(?:\\s+)"+"("+"[^<>\\s]+"+"(?:\\s*</(?:a|em|span|strong|i|b)[^>]*?>\\s*\\.*)*?"+"(?:\\s*?</(?:p|h[1-6]|li|dt|dd)>|$)"+")","gi");return text.replace(re_widont,'$1<span class="widont">&nbsp;</span>$2')};var caps=typogr.caps=function(text){var tokens=tokenize(text),result=[],in_skipped_tag=false,close_match,re_cap=re("("+"(\\b[A-Z\\d]*"+"[A-Z]\\d*[A-Z]"+"[A-Z\\d']*\\b)"+"|(\\b[A-Z]+\\.\\s?"+"(?:[A-Z]+\\.\\s?)+)"+"(?:\\s|\\b|$)"+")","g");tokens.forEach(function(token){if(token.type==="tag"){result.push(token.txt);close_match=re_skip_tags.exec(token.txt);if(close_match&&close_match[1]===undefined){in_skipped_tag=true}else{in_skipped_tag=false}}else{if(in_skipped_tag){result.push(token.txt)}else{result.push(token.txt.replace(re_cap,function(matched_str,g1,g2,g3){var caps,tail;if(g2){return'<span class="caps">%s</span>'.replace("%s",g2)}else{if(g3.slice(-1)===" "){caps=g3.slice(0,-1);tail=" "}else{caps=g3;tail=""}return'<span class="caps">%s1</span>%s2'.replace("%s1",caps).replace("%s2",tail)}}))}}});return result.join("")};typogr.typogrify=function(src){var text=src;if(src.jquery&&src.html){text=src.html()}text=amp(text);text=widont(text);text=smartypants(text);text=caps(text);text=initQuotes(text);text=ord(text);return text};var smartypants=typogr.smartypants=function(text){var tokens=tokenize(text),result=[],skipped_tag_stack=[],skipped_tag="",skip_match="",in_pre=false,prev_token_last_char="",last_char,t;tokens.forEach(function(token){if(token.type==="tag"){result.push(token.txt);if((skip_match=re_skip_tags.exec(token.txt))!==null){skipped_tag=skip_match[2].toLowerCase();if(skip_match[1]){if(skipped_tag_stack.length>0){if(skipped_tag===skipped_tag_stack[skipped_tag_stack.length-1]){skipped_tag_stack.pop()}}if(skipped_tag_stack.length===0){in_pre=false}}else{skipped_tag_stack.push(skipped_tag);in_pre=true}}}else{t=token.txt;last_char=t.slice(-1);if(!in_pre){t=smartEscapes(t);t=smartDashes(t);t=smartEllipses(t);t=smartBackticks(t);switch(t){case"'":if(/\S/.test(prev_token_last_char)){t="&#8217;"}else{t="&#8216;"}break;case'"':if(/\S/.test(prev_token_last_char)){t="&#8221;"}else{t="&#8220;"}break;default:t=smartQuotes(t)}}prev_token_last_char=last_char;result.push(t)}});return result.join("")};var tokenize=typogr.tokenize=function(text){var tokens=[],lastIndex=0,re_tag=/([^<]*)(<[^>]*>)/gi,curr_token;while((curr_token=re_tag.exec(text))!==null){var pre_text=curr_token[1],tag_text=curr_token[2];if(pre_text){tokens.push({type:"text",txt:pre_text})}tokens.push({type:"tag",txt:tag_text});lastIndex=re_tag.lastIndex}if(re_tag.lastIndex<=text.length){if(text.slice(-1)=="."&&text.slice(-2)!=".."){tokens.push({type:"text",txt:text.slice(lastIndex,text.length-1)});tokens.push({type:"text",txt:text.slice(-1)})}else{tokens.push({type:"text",txt:text.slice(lastIndex)})}}return tokens};var smartEscapes=typogr.smartEscapes=function(text){return text.replace(/\\"/g,"&#34;").replace(/\\'/g,"&#39;").replace(/\\-/g,"&#45;").replace(/\\\./g,"&#46;").replace(/\\\\/g,"&#92;").replace(/\\`/g,"&#96;")};var smartDashes=typogr.smartDashes=function(text){return text.replace(/---/g,"&#8212;").replace(/([^<][^!]|[^!]|^)--(?!>)/g,"$1&#8211;")};var smartEllipses=typogr.smartEllipses=function(text){return text.replace(/\.\.\./g,"&#8230;").replace(/\. \. \./g,"&#8230;")};var smartBackticks=typogr.smartBackticks=function(text){return text.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;")};var smartQuotes=typogr.smartQuotes=function(text){var punct_cls="[!\"#\\$\\%\\'()*+,-.\\/:;<=>?\\@\\[\\\\]\\^_`{|}~]",re_punct_str="(?=%s\\B)".replace("%s",punct_cls),close_cls="[^\\ \\t\\r\\n\\[\\{\\(\\-]",dec_dashes="&#8211;|&#8212;",re_opening_single_quotes=re("("+"\\s|"+"&nbsp;|"+"--|"+"&[mn]dash;|"+dec_dashes+"|"+"&#x201[34];"+")"+"'"+"(?=\\w)","g"),re_closing_single_quotes=re("("+close_cls+")"+"'"+"(?!\\s | s\\b | \\d)","g"),re_closing_single_quotes2=re("("+close_cls+")"+"'"+"(?!\\s | s\\b)","g"),re_opening_double_quotes=re("("+"\\s|"+"&nbsp;|"+"--|"+"&[mn]dash;|"+dec_dashes+"|"+"&#x201[34];"+")"+'"'+"(?=\\w)","g"),re_closing_double_quotes=re('"(?=\\s)',"g"),re_closing_double_quotes2=re("("+close_cls+')"',"g");return text.replace(re("^'%s".replace("%s",re_punct_str),"g"),"&#8217;").replace(re('^"%s'.replace("%s",re_punct_str),"g"),"&#8221;").replace(/"'(?=\w)/g,"&#8220;&#8216;").replace(/'"(?=\w)/g,"&#8216;&#8220;").replace(/\b'(?=\d{2}s)/g,"&#8217;").replace(re_opening_single_quotes,"$1&#8216;").replace(re_closing_single_quotes,"$1&#8217;").replace(re_closing_single_quotes2,"$1&#8217;$2").replace("'","&#8217;").replace(re_opening_double_quotes,"$1&#8220;").replace(re_closing_double_quotes,"&#8221;").replace(re_closing_double_quotes2,"$1&#8221;").replace('"',"&#8220;")};var Wrapper=function(obj){this._wrapped=obj};var result=function(obj,chain){return chain?typogr(obj).chain():obj};var addToWrapper=function(name,func){Wrapper.prototype[name]=function(){return result(func.call(typogr,this._wrapped),this._chain)}};var isFunction=function(obj){return!!(obj&&obj.constructor&&obj.call&&obj.apply)};var name;for(name in typogr){if(typogr.hasOwnProperty(name)&&isFunction(typogr[name])){addToWrapper(name,typogr[name])}}Wrapper.prototype.chain=function(){this._chain=true;return this};Wrapper.prototype.value=function(){return this._wrapped}})(this)},{}],29:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18}],30:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],31:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":30,_process:24,inherits:29}],32:[function(require,module,exports){module.exports=exports=function(_ua,obj){_ua=_ua.toLowerCase();if(obj===true){obj=exports}else if(!obj){obj={}}var _ff="firefox";var _android="android";var _mobile=".+mobile";var _webkit="webkit";var _ps="playstation";var _xbox="xbox";var _linux="linux";var _castDetect="crkey";var _chromecast="chromecast";var _tablet="tablet";var _windows="windows";var _phone="phone";var _firetv="firetv";var _sticktv="sticktv";test.call(obj,_ua,function(query,arr){obj.browser=arr[2]||query;var _v=_ua.match(new RegExp("((([\\/ ]version|"+arr[0]+"(?!.+version))[/ ])| rv:)([0-9]{1,4}\\.[0-9]{0,2})"));obj.version=_v?Number(_v[4]):0;obj.prefix=arr[1]},[true,_webkit],["\\(windows","ms","ie"],["safari",_webkit],[_ff,"Moz"],["opera","O"],["msie","ms","ie"],["chrome|crios/",_webkit,"chrome"]);test.call(obj,_ua,"platform",[true,_windows],[_linux,_linux],["lg.{0,3}netcast","lg"],[_ff+_mobile,_ff],["mac os x","mac"],["iphone|ipod|ipad","ios"],[_xbox,_xbox],[_ps,_ps],[_android,_android],[_windows,_windows],[_castDetect,_chromecast],["smart-tv;|;samsung;smarttv","samsung"]);test.call(obj,_ua,"device",[true,"desktop"],[_windows+".+touch|ipad|"+_android,_tablet],["iphone|("+_android+_mobile+")|("+_ff+_mobile+")|"+_windows+" phone|iemobile",_phone],[_xbox+"|"+_ps,"console"],["tv|smarttv|googletv|appletv|hbbtv|pov_tv|netcast.tv|webos.+large","tv"],[_castDetect,_chromecast],["amazon-fireos|nexus (?=[^1-6])\\d{1,2}",_tablet],["aftb|afts",_firetv],["aftm",_sticktv]);return obj;function test(_ua,fn){for(var tests=arguments,i=tests.length-1,query=tests[i][0];query!==true&&!new RegExp(query).test(_ua)&&i>0;query=tests[--i][0]);if(fn.slice||fn.call(this,query,tests[i])){this[fn]=tests[i][1]}}}},{}],33:[function(require,module,exports){"use strict";var keyCounter=0;var allWaypoints={};function Waypoint(options){if(!options){throw new Error("No options passed to Waypoint constructor")}if(!options.element){throw new Error("No element option passed to Waypoint constructor")}if(!options.handler){throw new Error("No handler option passed to Waypoint constructor")}this.key="waypoint-"+keyCounter;this.options=Waypoint.Adapter.extend({},Waypoint.defaults,options);this.element=this.options.element;this.adapter=new Waypoint.Adapter(this.element);this.callback=options.handler;this.axis=this.options.horizontal?"horizontal":"vertical";this.enabled=this.options.enabled;this.triggerPoint=null;this.group=Waypoint.Group.findOrCreate({name:this.options.group,axis:this.axis});this.context=Waypoint.Context.findOrCreateByElement(this.options.context);if(Waypoint.offsetAliases[this.options.offset]){this.options.offset=Waypoint.offsetAliases[this.options.offset]}this.group.add(this);this.context.add(this);allWaypoints[this.key]=this;keyCounter+=1}Waypoint.prototype.queueTrigger=function(direction){this.group.queueTrigger(this,direction)};Waypoint.prototype.trigger=function(args){if(!this.enabled){return}if(this.callback){this.callback.apply(this,args)}};Waypoint.prototype.destroy=function(){this.context.remove(this);this.group.remove(this);delete allWaypoints[this.key]};Waypoint.prototype.disable=function(){this.enabled=false;return this};Waypoint.prototype.enable=function(){this.context.refresh();this.enabled=true;return this};Waypoint.prototype.next=function(){return this.group.next(this)};Waypoint.prototype.previous=function(){return this.group.previous(this)};Waypoint.invokeAll=function(method){var allWaypointsArray=[];for(var waypointKey in allWaypoints){allWaypointsArray.push(allWaypoints[waypointKey])}for(var i=0,end=allWaypointsArray.length;i<end;i++){allWaypointsArray[i][method]()}};Waypoint.destroyAll=function(){Waypoint.invokeAll("destroy")};Waypoint.disableAll=function(){Waypoint.invokeAll("disable")};Waypoint.enableAll=function(){Waypoint.invokeAll("enable")};Waypoint.refreshAll=function(){Waypoint.Context.refreshAll()};Waypoint.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight};Waypoint.viewportWidth=function(){return document.documentElement.clientWidth};Waypoint.adapters=[];Waypoint.defaults={context:window,continuous:true,enabled:true,group:"default",horizontal:false,offset:0};Waypoint.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}};window.Waypoint=Waypoint;function requestAnimationFrameShim(callback){window.setTimeout(callback,1e3/60)}var keyCounter=0;var contexts={};var Waypoint=window.Waypoint;var oldWindowLoad=window.onload;function Context(element){this.element=element;this.Adapter=Waypoint.Adapter;this.adapter=new this.Adapter(element);this.key="waypoint-context-"+keyCounter;this.didScroll=false;this.didResize=false;this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()};this.waypoints={vertical:{},horizontal:{}};element.waypointContextKey=this.key;contexts[element.waypointContextKey]=this;keyCounter+=1;this.createThrottledScrollHandler();this.createThrottledResizeHandler()}Context.prototype.add=function(waypoint){var axis=waypoint.options.horizontal?"horizontal":"vertical";this.waypoints[axis][waypoint.key]=waypoint;this.refresh()};Context.prototype.checkEmpty=function(){var horizontalEmpty=this.Adapter.isEmptyObject(this.waypoints.horizontal);var verticalEmpty=this.Adapter.isEmptyObject(this.waypoints.vertical);if(horizontalEmpty&&verticalEmpty){this.adapter.off(".waypoints");delete contexts[this.key]}};Context.prototype.createThrottledResizeHandler=function(){var self=this;function resizeHandler(){self.handleResize();self.didResize=false}this.adapter.on("resize.waypoints",function(){if(!self.didResize){self.didResize=true;Waypoint.requestAnimationFrame(resizeHandler)}})};Context.prototype.createThrottledScrollHandler=function(){var self=this;function scrollHandler(){self.handleScroll();self.didScroll=false}this.adapter.on("scroll.waypoints",function(){if(!self.didScroll||Waypoint.isTouch){self.didScroll=true;Waypoint.requestAnimationFrame(scrollHandler)}})};Context.prototype.handleResize=function(){Waypoint.Context.refreshAll()};Context.prototype.handleScroll=function(){var triggeredGroups={};var axes={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var axisKey in axes){var axis=axes[axisKey];var isForward=axis.newScroll>axis.oldScroll;var direction=isForward?axis.forward:axis.backward;for(var waypointKey in this.waypoints[axisKey]){var waypoint=this.waypoints[axisKey][waypointKey];var wasBeforeTriggerPoint=axis.oldScroll<waypoint.triggerPoint;var nowAfterTriggerPoint=axis.newScroll>=waypoint.triggerPoint;var crossedForward=wasBeforeTriggerPoint&&nowAfterTriggerPoint;var crossedBackward=!wasBeforeTriggerPoint&&!nowAfterTriggerPoint;if(crossedForward||crossedBackward){waypoint.queueTrigger(direction);triggeredGroups[waypoint.group.id]=waypoint.group}}}for(var groupKey in triggeredGroups){triggeredGroups[groupKey].flushTriggers()}this.oldScroll={x:axes.horizontal.newScroll,y:axes.vertical.newScroll}};Context.prototype.innerHeight=function(){if(this.element==this.element.window){return Waypoint.viewportHeight()}return this.adapter.innerHeight()};Context.prototype.remove=function(waypoint){delete this.waypoints[waypoint.axis][waypoint.key];this.checkEmpty()};Context.prototype.innerWidth=function(){if(this.element==this.element.window){return Waypoint.viewportWidth()}return this.adapter.innerWidth()};Context.prototype.destroy=function(){var allWaypoints=[];for(var axis in this.waypoints){for(var waypointKey in this.waypoints[axis]){allWaypoints.push(this.waypoints[axis][waypointKey])}}for(var i=0,end=allWaypoints.length;i<end;i++){allWaypoints[i].destroy()}};Context.prototype.refresh=function(){var isWindow=this.element==this.element.window;var contextOffset=this.adapter.offset();var triggeredGroups={};var axes;this.handleScroll();axes={horizontal:{contextOffset:isWindow?0:contextOffset.left,contextScroll:isWindow?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:isWindow?0:contextOffset.top,contextScroll:isWindow?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var axisKey in axes){var axis=axes[axisKey];for(var waypointKey in this.waypoints[axisKey]){var waypoint=this.waypoints[axisKey][waypointKey];var adjustment=waypoint.options.offset;var oldTriggerPoint=waypoint.triggerPoint;var elementOffset=0;var freshWaypoint=oldTriggerPoint==null;var contextModifier,wasBeforeScroll,nowAfterScroll;var triggeredBackward,triggeredForward;if(waypoint.element!==waypoint.element.window){elementOffset=waypoint.adapter.offset()[axis.offsetProp]}if(typeof adjustment==="function"){adjustment=adjustment.apply(waypoint)}else if(typeof adjustment==="string"){adjustment=parseFloat(adjustment);if(waypoint.options.offset.indexOf("%")>-1){adjustment=Math.ceil(axis.contextDimension*adjustment/100)}}contextModifier=axis.contextScroll-axis.contextOffset;waypoint.triggerPoint=elementOffset+contextModifier-adjustment;wasBeforeScroll=oldTriggerPoint<axis.oldScroll;nowAfterScroll=waypoint.triggerPoint>=axis.oldScroll;triggeredBackward=wasBeforeScroll&&nowAfterScroll;triggeredForward=!wasBeforeScroll&&!nowAfterScroll;if(!freshWaypoint&&triggeredBackward){waypoint.queueTrigger(axis.backward);triggeredGroups[waypoint.group.id]=waypoint.group}else if(!freshWaypoint&&triggeredForward){waypoint.queueTrigger(axis.forward);triggeredGroups[waypoint.group.id]=waypoint.group}else if(freshWaypoint&&axis.oldScroll>=waypoint.triggerPoint){waypoint.queueTrigger(axis.forward);triggeredGroups[waypoint.group.id]=waypoint.group}}}for(var groupKey in triggeredGroups){triggeredGroups[groupKey].flushTriggers()}return this};Context.findOrCreateByElement=function(element){return Context.findByElement(element)||new Context(element)};Context.refreshAll=function(){for(var contextId in contexts){contexts[contextId].refresh()}};Context.findByElement=function(element){return contexts[element.waypointContextKey]};window.onload=function(){
if(oldWindowLoad){oldWindowLoad()}Context.refreshAll()};Waypoint.requestAnimationFrame=function(callback){var requestFn=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||requestAnimationFrameShim;requestFn.call(window,callback)};Waypoint.Context=Context;function byTriggerPoint(a,b){return a.triggerPoint-b.triggerPoint}function byReverseTriggerPoint(a,b){return b.triggerPoint-a.triggerPoint}var groups={vertical:{},horizontal:{}};var Waypoint=window.Waypoint;function Group(options){this.name=options.name;this.axis=options.axis;this.id=this.name+"-"+this.axis;this.waypoints=[];this.clearTriggerQueues();groups[this.axis][this.name]=this}Group.prototype.add=function(waypoint){this.waypoints.push(waypoint)};Group.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}};Group.prototype.flushTriggers=function(){for(var direction in this.triggerQueues){var waypoints=this.triggerQueues[direction];var reverse=direction==="up"||direction==="left";waypoints.sort(reverse?byReverseTriggerPoint:byTriggerPoint);for(var i=0,end=waypoints.length;i<end;i+=1){var waypoint=waypoints[i];if(waypoint.options.continuous||i===waypoints.length-1){waypoint.trigger([direction])}}}this.clearTriggerQueues()};Group.prototype.next=function(waypoint){this.waypoints.sort(byTriggerPoint);var index=Waypoint.Adapter.inArray(waypoint,this.waypoints);var isLast=index===this.waypoints.length-1;return isLast?null:this.waypoints[index+1]};Group.prototype.previous=function(waypoint){this.waypoints.sort(byTriggerPoint);var index=Waypoint.Adapter.inArray(waypoint,this.waypoints);return index?this.waypoints[index-1]:null};Group.prototype.queueTrigger=function(waypoint,direction){this.triggerQueues[direction].push(waypoint)};Group.prototype.remove=function(waypoint){var index=Waypoint.Adapter.inArray(waypoint,this.waypoints);if(index>-1){this.waypoints.splice(index,1)}};Group.prototype.first=function(){return this.waypoints[0]};Group.prototype.last=function(){return this.waypoints[this.waypoints.length-1]};Group.findOrCreate=function(options){return groups[options.axis][options.name]||new Group(options)};Waypoint.Group=Group;var Waypoint=window.Waypoint;function isWindow(element){return element===element.window}function getWindow(element){if(isWindow(element)){return element}return element.defaultView}function NoFrameworkAdapter(element){this.element=element;this.handlers={}}NoFrameworkAdapter.prototype.innerHeight=function(){var isWin=isWindow(this.element);return isWin?this.element.innerHeight:this.element.clientHeight};NoFrameworkAdapter.prototype.innerWidth=function(){var isWin=isWindow(this.element);return isWin?this.element.innerWidth:this.element.clientWidth};NoFrameworkAdapter.prototype.off=function(event,handler){function removeListeners(element,listeners,handler){for(var i=0,end=listeners.length-1;i<end;i++){var listener=listeners[i];if(!handler||handler===listener){element.removeEventListener(listener)}}}var eventParts=event.split(".");var eventType=eventParts[0];var namespace=eventParts[1];var element=this.element;if(namespace&&this.handlers[namespace]&&eventType){removeListeners(element,this.handlers[namespace][eventType],handler);this.handlers[namespace][eventType]=[]}else if(eventType){for(var ns in this.handlers){removeListeners(element,this.handlers[ns][eventType]||[],handler);this.handlers[ns][eventType]=[]}}else if(namespace&&this.handlers[namespace]){for(var type in this.handlers[namespace]){removeListeners(element,this.handlers[namespace][type],handler)}this.handlers[namespace]={}}};NoFrameworkAdapter.prototype.offset=function(){if(!this.element.ownerDocument){return null}var documentElement=this.element.ownerDocument.documentElement;var win=getWindow(this.element.ownerDocument);var rect={top:0,left:0};if(this.element.getBoundingClientRect){rect=this.element.getBoundingClientRect()}return{top:rect.top+win.pageYOffset-documentElement.clientTop,left:rect.left+win.pageXOffset-documentElement.clientLeft}};NoFrameworkAdapter.prototype.on=function(event,handler){var eventParts=event.split(".");var eventType=eventParts[0];var namespace=eventParts[1]||"__default";var nsHandlers=this.handlers[namespace]=this.handlers[namespace]||{};var nsTypeList=nsHandlers[eventType]=nsHandlers[eventType]||[];nsTypeList.push(handler);this.element.addEventListener(eventType,handler)};NoFrameworkAdapter.prototype.outerHeight=function(includeMargin){var height=this.innerHeight();var computedStyle;if(includeMargin&&!isWindow(this.element)){computedStyle=window.getComputedStyle(this.element);height+=parseInt(computedStyle.marginTop,10);height+=parseInt(computedStyle.marginBottom,10)}return height};NoFrameworkAdapter.prototype.outerWidth=function(includeMargin){var width=this.innerWidth();var computedStyle;if(includeMargin&&!isWindow(this.element)){computedStyle=window.getComputedStyle(this.element);width+=parseInt(computedStyle.marginLeft,10);width+=parseInt(computedStyle.marginRight,10)}return width};NoFrameworkAdapter.prototype.scrollLeft=function(){var win=getWindow(this.element);return win?win.pageXOffset:this.element.scrollLeft};NoFrameworkAdapter.prototype.scrollTop=function(){var win=getWindow(this.element);return win?win.pageYOffset:this.element.scrollTop};NoFrameworkAdapter.extend=function(){var args=Array.prototype.slice.call(arguments);function merge(target,obj){if(typeof target==="object"&&typeof obj==="object"){for(var key in obj){if(obj.hasOwnProperty(key)){target[key]=obj[key]}}}return target}for(var i=1,end=args.length;i<end;i++){merge(args[0],args[i])}return args[0]};NoFrameworkAdapter.inArray=function(element,array,i){return array==null?-1:array.indexOf(element,i)};NoFrameworkAdapter.isEmptyObject=function(obj){for(var name in obj){return false}return true};Waypoint.adapters.push({name:"noframework",Adapter:NoFrameworkAdapter});Waypoint.Adapter=NoFrameworkAdapter;module.exports=Waypoint},{}],34:[function(require,module,exports){(function(){"use strict";function noop(){}var Waypoint=window.Waypoint;function Inview(options){this.options=Waypoint.Adapter.extend({},Inview.defaults,options);this.axis=this.options.horizontal?"horizontal":"vertical";this.waypoints=[];this.createWaypoints()}Inview.prototype.createWaypoints=function(){var configs={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:0},{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]};for(var i=0,end=configs[this.axis].length;i<end;i++){var config=configs[this.axis][i];this.createWaypoint(config)}};Inview.prototype.createWaypoint=function(config){var self=this;this.waypoints.push(new Waypoint({element:this.options.element,handler:function(config){return function(direction){self.options[config[direction]].call(this,direction)}}(config),offset:config.offset,horizontal:this.options.horizontal}))};Inview.prototype.destroy=function(){for(var i=0,end=this.waypoints.length;i<end;i++){this.waypoints[i].destroy()}this.waypoints=[]};Inview.defaults={enter:noop,entered:noop,exit:noop,exited:noop};Waypoint.Inview=Inview})()},{}],35:[function(require,module,exports){module.exports={event:function(category,action,label,delay){if(typeof window.ga!=="undefined"){delay=typeof delay==="number"&&delay>=0?delay:100;if(typeof window.ga!=="undefined"){ga("send","event",category,action,label);ga("koTracker.send","event",category,action,label)}}},exception:function(description){if(typeof window.ga!=="undefined"){ga("send","exception",{exDescription:description,exFatal:false});ga("koTracker.send","exception",{exDescription:description,exFatal:false})}}}},{}],36:[function(require,module,exports){module.exports=function(){function asciiFromCanvas(canvas,options){var characters=" .,:i1tfLCG08@".split("");var context=canvas.getContext("2d");var canvasWidth=canvas.width;var canvasHeight=canvas.height;var asciiCharacters="";var contrastFactor=259*(options.contrast+255)/(255*(259-options.contrast));var imageData=context.getImageData(0,0,canvasWidth,canvasHeight);for(var y=0;y<canvasHeight;y+=2){for(var x=0;x<canvasWidth;x++){var offset=(y*canvasWidth+x)*4;var color=getColorAtOffset(imageData.data,offset);var contrastedColor={red:bound(Math.floor((color.red-128)*contrastFactor)+128,[0,255]),green:bound(Math.floor((color.green-128)*contrastFactor)+128,[0,255]),blue:bound(Math.floor((color.blue-128)*contrastFactor)+128,[0,255]),alpha:color.alpha};var brightness=(.299*contrastedColor.red+.587*contrastedColor.green+.114*contrastedColor.blue)/255;var character=characters[characters.length-1-Math.round(brightness*(characters.length-1))];asciiCharacters+=character}asciiCharacters+="\n"}options.callback(asciiCharacters)}function getColorAtOffset(data,offset){return{red:data[offset],green:data[offset+1],blue:data[offset+2],alpha:data[offset+3]}}function bound(value,interval){return Math.max(interval[0],Math.min(interval[1],value))}return{fromCanvas:function(canvas,options){options=options||{};options.contrast=options.contrast||350;options.contrast=options.contrast;options.callback=options.callback||null;return asciiFromCanvas(canvas,options)}}}},{}],37:[function(require,module,exports){var camera=require("./vendor/_camera")();var ascii=require("./_asciiFromCanvas")();var analytics=require("./_analytics");module.exports=function(){var shutter=document.getElementsByClassName("js-webcamButton")[0];var shutterFallback=document.getElementsByClassName("js-webcamFallback")[0];var win=win||window;var asciiCamera=function(){var el=document.getElementsByClassName("js-webcam")[0];var capturing=false;shutter.removeEventListener("click",asciiCamera,false);camera.init({width:160,height:120,fps:8,mirror:true,onFrame:function(canvas){ascii.fromCanvas(canvas,{contrast:350,callback:function(asciiString){el.innerHTML=asciiString}})},onSuccess:function(){capturing=true;shutter.textContent="Capture";analytics.event("specimen","webcam","video");shutter.onclick=function(){if(capturing){camera.pause();shutter.textContent="Retake";analytics.event("specimen","webcam","capture")}else{camera.start();shutter.textContent="Capture";analytics.event("specimen","webcam","retake")}capturing=!capturing}},onError:function(error){console.error(error);analytics.exception(error)},onNotSupported:function(){fallback(el);shutter.removeEventListener("click",asciiCamera,false);shutterFallback.click();shutter.addEventListener("click",function(){shutterFallback.click()},false)}})};shutter.addEventListener("click",asciiCamera,false);var fallback=function(el){if(shutterFallback){shutterFallback.onchange=function(e){var files=e.target.files;var file=files[0];var canvas=document.createElement("canvas");var context=canvas.getContext("2d");canvas.width=160;canvas.height=120;var img=new win.Image;try{var imgURL=win.URL.createObjectURL(file);img.src=imgURL;img.onload=function(){context.drawImage(img,0,0,160,img.height/(img.width/160));ascii.fromCanvas(canvas,{contrast:128,callback:function(asciiString){el.innerHTML=asciiString}})};win.URL.revokeObjectURL(imgURL)}catch(e){console.warn(e,"Neither createObjectURL or FileReader are supported");analytics.exception(e)}}}}}},{"./_analytics":35,"./_asciiFromCanvas":36,"./vendor/_camera":44}],38:[function(require,module,exports){var FontFaceObserver=require("fontfaceobserver");var Editable=require("contenteditable");var bigIdeasText=require("big-ideas-text");var classie=require("classie");var marked=require("marked");var typogr=require("typogr");var throttle=require("lodash.throttle");var analytics=require("./_analytics");var supports=require("./_supports");var supportsBackgroundClip=supports("webkitBackgroundClip");marked.setOptions({gfm:true,tables:false,sanitize:false,smartypants:false});module.exports=function(els,opts){for(var index in els){if(els.hasOwnProperty(index)){var el=els[index];editableEvents(el)}}};var editableEvents=function(el,opts){var editable=new Editable(el);editable.enable();editable.on("change",function(e){editablePaste(e);if(classie.has(el,"js-bigIdeasText")){if(e.target.children.length===0||e.target.children.length===1&&e.target.children[0].tagName==="BR"){var span=document.createElement("span");span.innerHTML=e.target.innerHTML.trim();e.target.innerHTML="";e.target.appendChild(span);if(document.createRange){var range=document.createRange();var selection=window.getSelection();range.selectNodeContents(span);range.collapse(false);selection.removeAllRanges();selection.addRange(range)}}bigIdeasText(el,opts)}});if(editable.element.hasAttribute("contenteditable")){editable.element.onclick=function(){var tmpNode=this;var tmpLabel="Section::";while(tmpNode&&!tmpNode.id){tmpNode=tmpNode.parentNode}if(tmpNode&&tmpNode.id){tmpLabel+=tmpNode.id}else{tmpLabel+="Top or no ID"}analytics.event("specimen","focus",tmpLabel)}}if(editable.element.parentNode.hasAttribute("data-hint")){editable.element.parentNode.onclick=function(){editable.element.focus();analytics.event("specimen","focus","data-hint")};editable.element.onfocus=function(){classie.add(editable.element.parentNode,"is-edited")}}if(classie.has(el,"js-mdEdit")){var obvRegular=new FontFaceObserver("Georgia Pro");obvRegular.check().then(function(){});var output=el.parentNode.parentNode.parentNode.querySelector(".js-mdRender");var markdown=function(md){var updated=typogr(marked(md)).typogrify();if(output.innerHTML!==updated){output.innerHTML=updated}};markdown(el.textContent||el.innerText);editable.on("change",throttle(function(e){editablePaste(e);markdown(el.textContent||el.innerText)},200,true))}if(supportsBackgroundClip){editable.on("change",waypointRefresh)}};var editablePaste=function(e){if(!("-webkit-user-modify"in document.body.style)&&!("user-modify"in document.body.style)){if(e.type==="paste"){var content=((e.originalEvent||e).clipboardData||window.clipboardData).getData("Text");if(typeof e.target.innerText!=="undefined"){e.target.innerText=e.target.innerText+content}else{e.preventDefault();e.target.textContent=e.target.textContent+content}}}};var waypointRefresh=throttle(function(){window.Waypoint.refreshAll()},5e3)},{"./_analytics":35,"./_supports":41,"big-ideas-text":1,classie:2,contenteditable:5,fontfaceobserver:15,"lodash.throttle":21,marked:22,typogr:28}],39:[function(require,module,exports){var favicon=require("favicon-setter");var typefaces=require("./_typefaces");var hsv=require("hsv2rgb");var throttle=require("lodash.throttle");var doc=document||false;var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");var numletters=alphabet.length;var getPercentage=function(){return(document.documentElement.scrollTop+document.body.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100};var initCanvas=function(){var cnvs=doc.createElement("canvas");cnvs.setAttribute("id","js-faviconCanvas");cnvs.setAttribute("width",32);cnvs.setAttribute("height",32);cnvs.setAttribute("style","position: relative; z-index: -1; opacity: 0.00001; height: 0; overflow: hidden");doc.body.appendChild(cnvs);return cnvs};var updateCanvas=function(cnvs,letter,per){var ctx=cnvs.getContext("2d");ctx.clearRect(0,0,cnvs.width,cnvs.height);ctx.font='32px "'+typefaces.primary+'"';ctx.fillStyle="rgb("+hsv(177+Math.floor(per)/100*65,.58,.77).join(", ")+")";ctx.textBaseline="bottom";ctx.fillText(letter,6,33);return cnvs.toDataURL("image/png")};module.exports=function(){var scroll=getPercentage();var last=scroll;var letter=Math.ceil(scroll*numletters/100);var cnvs=initCanvas();var win=win||window;var faviconRefresh=throttle(function(){scroll=getPercentage();letter=Math.ceil(scroll*numletters/100);if(scroll!==last&&letter!==Math.ceil(last*numletters/100)){last=scroll;favicon(updateCanvas(cnvs,alphabet[letter-1]||alphabet[0],scroll))}},150);if(doc.body&&win.innerHeight){win.addEventListener("scroll",faviconRefresh)}}},{"./_typefaces":42,"favicon-setter":10,hsv2rgb:17,"lodash.throttle":21}],40:[function(require,module,exports){var supports=require("./_supports");var Waypoint=require("waypoints/lib/commonjs.waypoints");var Inview=require("waypoints/lib/shortcuts/inview");var throttle=require("lodash.throttle");var doc=document||{};var el=doc.getElementById("js-exampleCSS")||false;var getViewportWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};module.exports=function(){var viewportWidth=getViewportWidth();if(el){if(supports("webkitBackgroundClip")){el.innerHTML=["/*"," * Edit this section"," * in style…"," */","",".this-section {","  background: linear-gradient(","    turquoise, orange, cornflowerblue, turquoise","  );","  background-size: 1px 1403px;","  animation: scroll 20s ease infinite 2s;","  -webkit-text-fill-color: transparent;","  -webkit-background-clip: text;","}","","@keyframes scroll {","  0%   { background-position-y: 0%    }","  50%  { background-position-y: -500% }","  100% { background-position-y: 0%    }","}"].join("\n");var inview=new Waypoint.Inview({element:el.parentNode,enter:function(direction){var elm=this.element.querySelector("#js-exampleCSS");changeElementType(elm,"style")},exited:function(direction){var elm=this.element.querySelector("#js-exampleCSS");changeElementType(elm,"div")}});var waypointRefresh=throttle(function(){if(viewportWidth!==getViewportWidth()){Waypoint.refreshAll()}viewportWidth=getViewportWidth()},5e3);window.addEventListener("resize",waypointRefresh)}}};var changeElementType=function(el,type){var elNew=doc.createElement(type||"div");var attrsOld=el.attributes;var attrsNew=elNew.attributes;for(var i=0,len=attrsOld.length;i<len;i++){attrsNew.setNamedItem(attrsOld.item(i).cloneNode())}if(el.firstChild){do{elNew.appendChild(el.firstChild)}while(el.firstChild)}el.parentNode.replaceChild(elNew,el)}},{"./_supports":41,"lodash.throttle":21,"waypoints/lib/commonjs.waypoints":33,"waypoints/lib/shortcuts/inview":34}],41:[function(require,module,exports){module.exports=function(property){var doc=document||{};return property in doc.documentElement.style}},{}],42:[function(require,module,exports){module.exports={primary:"Fourteen-oh-three Vintage Mono",secondary:"Georgia Pro"}},{}],43:[function(require,module,exports){var FontFaceObserver=require("fontfaceobserver/fontfaceobserver");var typefaces=require("./_typefaces.js");var bigIdeasText=require("big-ideas-text");var docReady=require("doc-ready");var editable=require("./_editable");var asciiToPre=require("./_asciiToPre.js");var sectionCss=require("./_section-css.js");var fav=require("./_favicon.js");var OnPrint=require("on-print");var fontFeatures=require("font-feature-fibbing");var classie=require("classie");var fitterHappierText=require("fitter-happier-text");var loadCSS=require("fg-loadcss");var analytics=require("./_analytics.js");var observer=new FontFaceObserver(typefaces.primary);var contentEditable=document.querySelectorAll("[contenteditable]");var elScale=document.querySelectorAll(".js-bigIdeasText");var animateIn;var bigIdeasTextOpts={maxfontsize:300,minfontsize:30};observer.check(null,7e3).then(function(){bigIdeasText(elScale,bigIdeasTextOpts);animateIn();editable(contentEditable,bigIdeasTextOpts)},function(){console.warn("1403 Vintage Mono is not available");analytics.exception("1403 Vintage Mono not available");editable(contentEditable,{})});docReady(function(){var html=document.documentElement;var printListener=new OnPrint;var elPoster;var elRestore;if(!fontFeatures()){classie.add(html,"no-ffs");console.warn("Your browser or device doesn’t support OpenType features :(")}fav();asciiToPre();sectionCss();loadCSS("/css/georgia-pro.css");printListener.on("before",function(){elPoster=document.querySelector(".js-poster").children[0];elRestore=elPoster.cloneNode(true);analytics.event("specimen","print","before");fitterHappierText(elPoster.children)});printListener.on("after",function(){var parent=elPoster.parentNode;bigIdeasText(elRestore,bigIdeasTextOpts);parent.insertBefore(elRestore,parent.firstChild);parent.removeChild(elPoster);editable(parent.querySelectorAll("[contenteditable]"),bigIdeasTextOpts)});printListener.start()});animateIn=function(){var animate=document.querySelectorAll(".animated");for(var i=0;i<animate.length;++i){classie.remove(animate[i],"is-invisible");classie.add(animate[i],"fadeIn")}}},{"./_analytics.js":35,"./_asciiToPre.js":37,"./_editable":38,"./_favicon.js":39,"./_section-css.js":40,"./_typefaces.js":42,"big-ideas-text":1,classie:2,"doc-ready":6,"fg-loadcss":11,"fitter-happier-text":12,"font-feature-fibbing":13,"fontfaceobserver/fontfaceobserver":14,"on-print":23}],44:[function(require,module,exports){module.exports=function(){var options;var video,canvas,context;var renderTimer;function initVideoStream(){video=document.createElement("video");video.setAttribute("width",options.width);video.setAttribute("height",options.height);navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL;if(navigator.getUserMedia){navigator.getUserMedia({video:true},function(stream){options.onSuccess();if(video.mozSrcObject!==undefined){video.mozSrcObject=stream}else{video.src=window.URL&&window.URL.createObjectURL(stream)||stream}initCanvas()},options.onError)}else{options.onNotSupported()}}function initCanvas(){canvas=options.targetCanvas||document.createElement("canvas");canvas.setAttribute("width",options.width);canvas.setAttribute("height",options.height);context=canvas.getContext("2d");if(options.mirror){context.translate(canvas.width,0);context.scale(-1,1)}startCapture()}function startCapture(){video.play();renderTimer=setInterval(function(){try{context.drawImage(video,0,0,video.width,video.height);options.onFrame(canvas)}catch(e){}},Math.round(1e3/options.fps))}function stopCapture(){pauseCapture();if(video.mozSrcObject!==undefined){video.mozSrcObject=null}else{video.src=""}}function pauseCapture(){if(renderTimer)clearInterval(renderTimer);video.pause()}return{init:function(captureOptions){var doNothing=function(){};options=captureOptions||{};options.fps=options.fps||30;options.width=options.width||640;options.height=options.height||480;options.mirror=options.mirror||false;options.targetCanvas=options.targetCanvas||null;options.onSuccess=options.onSuccess||doNothing;options.onError=options.onError||doNothing;options.onNotSupported=options.onNotSupported||doNothing;options.onFrame=options.onFrame||doNothing;initVideoStream()},start:startCapture,pause:pauseCapture,stop:stopCapture}}},{}]},{},[43]);